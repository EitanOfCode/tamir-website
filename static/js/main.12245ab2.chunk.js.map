{"version":3,"sources":["assets/images/S.jpg","utils/general-utils.js","utils/excell-utils.js","components/MsgToShow.js","components/Dropzone.js","utils/date-utils.js","utils/local-db.js","Firebase/Firestore.js","Firebase/Firebase.js","utils/getColumns.js","utils/createRowData.js","components/TableTabScene.js","components/AssignmentDialog.js","components/EnhancedTable.js","components/Select.js","components/GenericTab.js","utils/Upload.js","Scenes/ReportsTabScene.js","Scenes/MainScene.js","App.js","serviceWorker.js","index.js","assets/images/tamir_logoshakuf.png"],"names":["module","exports","entriesToObj","entries","reduce","prev","curr","key","val","exists","obj","field","checkIfAllFieldsHaveValue","fields","hasValue","every","removeEmptyFields","Object","filter","openFile","inputFile","fileReader","FileReader","Promise","resolve","reject","onerror","abort","onload","fileName","name","result","readAsArrayBuffer","fileToAOA","res","worksheet","XLSX","read","Uint8Array","type","SheetNames","forEach","sheetName","roa","utils","sheet_to_json","Sheets","header","length","push","aoa","aoaToFile","workbook","book_new","set_right_to_left","sheet","aoa_to_sheet","book_append_sheet","writeFile","wb","Workbook","Views","RTL","useStyles","makeStyles","theme","title","textAlign","fontSize","MsgToShow","body","visible","handleClose","classes","_handleClose","Dialog","disableBackdropClick","disableEscapeKeyDown","open","onClose","aria-labelledby","aria-describedby","DialogTitle","id","className","DialogContent","DialogContentText","DialogActions","Button","onClick","color","hasAtLeastOneValue","arr","some","v","undefined","Dropzone","onGetFile","useState","msgState","setMsgState","onDrop","useCallback","acceptedFiles","files","openPromises","map","all","then","openedFiles","aoaoa","aoas","subArray","subArrayValue","concatAll","x","filesToAOAs","useDropzone","getRootProps","getInputProps","isDragActive","style","display","justifyContent","marginTop","src","width","height","alignSelf","toMoment","date","Date","moment","toDate","totalHoursWorked","attendanceDays","endTime","startTime","start","end","startMoment","endMoment","diff","duration","asHours","diffInHours","acc","addOwners","myRole","myUid","myOwners","roleOfUserToAdd","userToAdd","role","substr","owners","studentStatus","uid","firestoreDb","collections","students","users","getStudents","collection","getSpecificStudent","studentId","doc","getSpecificUser","Uid","getUsers","deleteStudent","delete","deleteUser","userId","getAttendance","tutorUIDs","month","firstOfMonth","getFullYear","getMonth","lastOfMonth","getDate","tutorUID","where","get","snapshot","docs","flatMap","data","shifts","getModule","firebase","firestore","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firestoreModule","firestoreModuleInit","BirthDayEditor","props","handleChangeComplete","event","setState","dob","target","value","onCommit","state","this","ReactDOM","findDOMNode","getElementsByTagName","TextField","label","defaultValue","onChange","InputLabelProps","shrink","React","Component","phoneEditor","handleChangePhone","phone","country","placeholder","defaultColumnProperties","filterable","sortable","resizable","editable","formatter","minWidth","DropDownEditor","Editors","NumericFilter","Filters","AutoCompleteFilter","TShirtSizesEditor","options","genderEditor","classEditor","columns","filterRenderer","editor","c","departmentManagerColumns","coordinatorColumns","tutorColumns","Columns","setRows","setLoading","str","onSnapshot","querySnapshot","fid","err","console","log","getUsersPhones","setIDArr","getStudentsPhones","getTutors","answer","row","getCoordinators","getDepartmentManagers","root","alignContent","border","borderRadius","borderColor","borderWidth","maxWidth","nested","paddingLeft","spacing","actionsContainer","flexDirection","actions","margin","padding","saveContainer","marginRight","button","fontFamily","formTitle","font","formText","textField","marginLeft","icon","buttonProgress","green","position","top","left","menu","rowRender","selectors","Data","Selectors","sortRows","initialRows","sortColumn","sortDirection","rows","sort","a","b","handleFilterChange","filters","newFilters","filterTerm","column","RowRenderer","renderBaseRow","rowToRender","lastModified","format","idx","backgroundColor","backgroundPosition","borderBlockColor","TableTabScene","originalRows","setOriginalRows","setMainRows","setSaveButtonColor","saveButtonColor","userStatus","tutors","coordinators","departmentManagers","selectedIndexes","setSelectedIndexes","setFilters","rowsCopy","loading","loadingPage","setLoadingPage","firstNameErr","lastNameErr","genderErr","phoneErr","formState","setFormState","assignmentDialogType","setAssignmentDialogType","openForm","setOpenForm","filteredRows","getRows","newStudent","setNewStudent","loadingAdd","setLoadingAdd","loadingSave","setLoadingSave","openDeleteCheck","setOpenDeleteCheck","openAssignMenu","setOpenAssignMenu","studentsPhones","setStudentsPhones","fixStudentFields","student","hasOwnProperty","fixStudentsFields","getOptionsToAssign","firstName","updateDate","updateNums","i","handleChange","fieldName","handleCloseForm","handleCloseCheckDelete","removeUnnecessaryFields","check","tutor","coordinator","departmentManager","checkIfStudentExist","includes","isValidPhone","addStudent","fixedStudent","add","ref","unshift","getMissedDetailsForAllStudents","catch","error","rowText","columnsToShow","tutorsOptions","coordinatorsOptions","departmentManagersOptions","studentToArr","r","getTutorFromFid","getMissedDetailsForStudent","newSt","status","temp","lastName","getCoordinatorFromFid","getDepartmentManagerFromFid","newRows","firstTimeLoading","fixStudentDOB","saveUpdates","fids","deleteUnnecessaryStudent","ids","j","getTime","getStudentsToUpdate","fixStudentsDOB","set","makeUpdate","borderStyle","variant","disabled","size","CircularProgress","autoComplete","required","autoFocus","select","gender","SelectProps","MenuProps","option","MenuItem","concat","exportToExcel","rowKey","reverse","rowGetter","rowsCount","minHeight","toolbar","enableFilter","onAddFilter","onClearFilters","getValidFilterValues","columnKey","columnId","item","indexOf","onGridSort","onGridRowsUpdated","fromRow","toRow","updated","deepcopy","rowRenderer","enableCellSelect","rowSelection","showCheckbox","enableShiftSelect","onRowsSelected","rowIdx","onRowsDeselected","rowIndexes","newSelectedIndexes","selectBy","indexes","List","component","ListItem","ListItemIcon","ListItemText","primary","Collapse","in","timeout","unmountOnExit","disablePadding","AssignmentDialog","optionsArr","chosenOption","o","update","shift","dataToRemove","FieldValue","arrayRemove","newArr","Typography","AssignmentRow","valueProp","other","setValue","radioGroupRef","useRef","useEffect","onEntering","current","focus","dividers","RadioGroup","newValue","FormControlLabel","control","Radio","labelPlacement","neighborhood","city","palette","background","paper","maxHeight","keepMounted","desc","orderBy","headRows","numeric","EnhancedTableHead","onSelectAllClick","order","numSelected","rowCount","onRequestSort","multiSelect","TableHead","TableRow","TableCell","align","TableSortLabel","active","direction","property","Checkbox","indeterminate","checked","useCircularIndeterminateStyles","progress","CircularIndeterminate","useToolbarStyles","paddingRight","highlight","secondary","main","lighten","light","text","dark","spacer","flex","EnhancedTableToolbar","onClickFetchReport","isFetchingReport","Toolbar","clsx","tableTitle","table","tableWrapper","overflowX","EnhancedTable","selected","handleClick","handleSelectAll","setOrder","setOrderBy","page","setPage","rowsPerPage","setRowsPerPage","emptyRows","Math","min","Paper","Table","TableBody","array","cmp","stabilizedThis","el","index","stableSort","getSorting","slice","isItemSelected","labelId","hover","aria-checked","tabIndex","inputProps","colSpan","TablePagination","rowsPerPageOptions","count","backIconButtonProps","nextIconButtonProps","onChangePage","newPage","onChangeRowsPerPage","mandatoryRows","Select","getLabel","checkDisabled","values","chosen","handleClickOpen","canSend","rest","onSelectingDone","existingName","send","groups","schoolGrade","school","address","govID","email","shirtSize","friends","socialCircle","youthGroup","interests","specialIssues","prefferedDays","staffMemberAppointed","comments","dense","AppBar","float","flexGrow","CardContent","scope","NativeSelect","selectEmpty","fileRows","uploadedFinished","genders","Size","rowRener","GenericTab","genericSaveButtonColor","setGenericSaveButtonColor","newRow","setNewRow","usersPhones","setUsersPhones","fixRowFields","fixRowsFields","checkIfUserExist","addRow","fixedRow","rowToArr","deleteUnnecessaryRow","getRowsToUpdate","validate","INIT_STATE","aoo","selecting","uploading","uploadProgress","successfullUploaded","errorUploading","Upload","columnsNames","cellVal","fileRowsToTableRows","tableName","onNewFile","keys","aoaToAoo","require","orderAndLabelsOfStatsInReport","ReportsTabScene","reportType","setReportType","selectedMonth","selectedYear","selectedDate","setSelectedDate","setSelected","setIsFetchingReport","fetchReports","results","Error","arr1","arr2","aoaOfUIDs","resultsOfUID","objOfMonthsToShifts","_","groupBy","sortedMonths","sortBy","studentsInYourCare","studentsWhoAttendedContentGroupActivity","groupActivitiesWithAdmirablePerson","regiousGroupActivities","studentsDiscussedWith","studentsWhoSharedProblems","totalHoursWorkedInMonth","sortedShifts","activities","shiftA","shiftB","sortedShiftsWithGroupActivities","sortedShiftsWithDiscussion","discussionExists","groupActivitiesExist","lastShiftWithGroupActivity","union","find","participants","flatMapDeep","subtype","attended","sum","discussionActivities","ceil","mapValues","merge","elm","accArr","currUID","currArr","Box","marginBottom","fontWeight","FormControl","aria-label","lang","i18n","monthFormat","dateFormat","he","monthNames","year","maskedValue","selectedIndex","newSelected","n","paddingTop","details","appBar","alignItems","tabLabel","uiConfig","signInFlow","signInOptions","provider","auth","PhoneAuthProvider","PROVIDER_ID","defaultCountry","callbacks","signInSuccessWithAuthResult","popup","MainScene","unregisterAuthObserver","setUserStatus","loadingTutors","setLoadingTutors","loadingCoordinators","setLoadingCoordinators","loadingDepartmentManagers","setLoadingDepartmentManagers","studentsRows","setStudentsRows","tutorsSaveButtonColor","setTutorsSaveButtonColor","coordinatorsSaveButtonColor","setCoordinatorsSaveButtonColor","departmentManagersSaveButtonColor","setDepartmentManagersSaveButtonColor","coordinatorsRows","setCoordinatorsRows","tutorsRows","setTutorsRows","departmentManagersRows","setDepartmentManagersRows","displayedTab","setDisplayedTab","tutorsOriginalRows","setTutorsOriginalRows","coordinatorsOriginalRows","setCoordinatorsOriginalRows","departmentManagersOriginalRows","setDepartmentManagersOriginalRows","languageCode","onAuthStateChanged","user","getIdTokenResult","idTokenResult","claims","isRegistered","signOut","currentUser","logo","firebaseAuth","window","onbeforeunload","Tabs","TabIndicatorProps","textColor","scrollButtons","Tab","getAppropriateStudentsRows","aooToAdd","App","Boolean","location","hostname","match","document","getElementById","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.12245ab2.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/S.5b3b9cd5.jpg\";","const concatAll = aoaoa => {\r\n  const aoas = [];\r\n  aoaoa.forEach(subArray => {\r\n    subArray.forEach(subArrayValue => {\r\n      aoas.push(subArrayValue);\r\n    });\r\n  });\r\n  return aoas;\r\n};\r\n\r\nconst entriesToObj = entries =>\r\n  entries.reduce((prev, curr) => {\r\n    const [key, val] = curr;\r\n    return { ...prev, [key]: val };\r\n  }, {});\r\n\r\nconst zip = (arr1, arr2) => arr1.map((elm, i) => [elm, arr2[i]]);\r\n\r\nconst exists = (obj, field) => obj[field];\r\n\r\nconst checkIfAllFieldsHaveValue = (fields, obj, hasValue = exists) => {\r\n  return fields.every(field => hasValue(obj, field));\r\n};\r\n\r\nconst removeEmptyFields = obj => entriesToObj(Object.entries(obj).filter(([, v]) => v));\r\n\r\nexport { concatAll, entriesToObj, zip, checkIfAllFieldsHaveValue, removeEmptyFields };\r\n","import XLSX from 'xlsx';\nimport { concatAll } from './general-utils';\n\nconst openFile = inputFile => {\n  const fileReader = new FileReader();\n  return new Promise((resolve, reject) => {\n    fileReader.onerror = () => {\n      fileReader.abort();\n      resolve();\n    };\n    fileReader.onload = () => {\n      resolve({ fileName: inputFile.name, result: fileReader.result });\n    };\n    fileReader.readAsArrayBuffer(inputFile);\n  });\n};\n\nconst fileToAOA = ({ fileName, result }) => {\n  const res = [];\n  if (typeof result !== 'string') {\n    const worksheet = XLSX.read(new Uint8Array(result), { type: 'array' });\n    worksheet.SheetNames.forEach(function (sheetName) {\n      const roa = XLSX.utils.sheet_to_json(worksheet.Sheets[sheetName], { header: 1 });\n      if (roa.length) {\n        res.push({ fileName, sheetName, aoa: roa });\n      }\n    });\n  }\n  return res;\n};\n\nconst filesToAOAs = files => {\n  const openPromises = files.map(openFile);\n  return new Promise((resolve, reject) => {\n    Promise.all(openPromises).then(openedFiles => {\n      resolve(\n        concatAll(\n          openedFiles\n            .filter(x => x !== undefined)\n            .map(fileToAOA)\n            .filter(aoa => aoa.length !== 0)\n        )\n      );\n    });\n  });\n};\n\nconst aoaToFile = ({ fileName, sheetName = 'Sheet1', aoa }) => {\n  if (aoa) {\n    const workbook = XLSX.utils.book_new();\n    set_right_to_left(workbook);\n    const sheet = XLSX.utils.aoa_to_sheet(aoa);\n    XLSX.utils.book_append_sheet(workbook, sheet, sheetName);\n    XLSX.writeFile(workbook, fileName + '.xlsx');\n  }\n};\n\nconst set_right_to_left = wb => {\n  if (!wb.Workbook) wb.Workbook = {};\n  if (!wb.Workbook.Views) wb.Workbook.Views = [];\n  if (!wb.Workbook.Views[0]) wb.Workbook.Views[0] = {};\n  wb.Workbook.Views[0].RTL = true;\n};\n\nexport { filesToAOAs, aoaToFile };\n","\nimport React from \"react\";\n\nimport {\n    makeStyles,\n    Button,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    DialogContentText,\n\n} from '@material-ui/core/';\n\nconst useStyles = makeStyles(theme => ({\n    title: {\n        textAlign: 'center',\n        fontSize: 30,\n    },\n\n\n}));\n\nconst MsgToShow = ({ title, body, visible, handleClose }) => {\n\n    const classes = useStyles();\n\n    function _handleClose() {\n        handleClose();\n    }\n\n    return (\n        <Dialog\n            disableBackdropClick\n            disableEscapeKeyDown\n            open={visible}\n            onClose={_handleClose}\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n        >\n            <DialogTitle id=\"alert-dialog-title\" className={classes.title}>{title}</DialogTitle>\n            <DialogContent>\n                <DialogContentText id=\"alert-dialog-description\">\n                    {body}\n                </DialogContentText>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={_handleClose} color=\"primary\">\n                    OK\n          </Button>\n            </DialogActions>\n        </Dialog>\n    );\n}\n\nexport { MsgToShow };","import React, { useCallback, useState } from 'react';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { filesToAOAs } from '../utils/excell-utils';\r\nimport { MsgToShow } from './MsgToShow';\r\n\r\nimport logo from '../assets/images/tamir_logoshakuf.png';\r\nconst hasAtLeastOneValue = arr => arr.some(v => v !== undefined && v !== null && v !== '');\r\nconst Dropzone = ({ onGetFile }) => {\r\n  const [msgState, setMsgState] = useState({ title: '', body: '', visible: false });\r\n  const onDrop = useCallback(acceptedFiles => {\r\n    filesToAOAs(acceptedFiles).then(aoas => {\r\n      if (aoas.length > 0) onGetFile(aoas[0].aoa.filter(hasAtLeastOneValue));\r\n      else {\r\n        setMsgState({\r\n          title: 'ייבוא מאקסל',\r\n          body: '!נא לטעון קובץ לא ריק',\r\n          visible: true\r\n        });\r\n      }\r\n    });\r\n  }, []);\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop });\r\n\r\n  return (\r\n    <div {...getRootProps()} style={{ display: 'flex', justifyContent: 'center', marginTop: 100 }}>\r\n      <MsgToShow {...msgState} handleClose={() => setMsgState({ ...msgState, visible: false })} />\r\n\r\n      <input {...getInputProps()} />\r\n      {isDragActive ? (\r\n\r\n        <img src={\"https://i.imgur.com/7YQeiQX.png\"} style={{\r\n          width: 350,\r\n          height: 350,\r\n          alignSelf: 'center',\r\n        }} />\r\n\r\n      ) : (\r\n          <img src={\"https://i.imgur.com/7YQeiQX.png\"} style={{\r\n            width: 350,\r\n            height: 350,\r\n            alignSelf: 'center',\r\n          }} />\r\n        )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { Dropzone };\r\n","import moment from 'moment';\n\nconst toMoment = date => {\n  if (date instanceof Date) {\n    return moment(date);\n  }\n  return moment(date.toDate());\n};\n\nconst diffInHours = (start, end) => {\n  const startMoment = toMoment(start);\n  const endMoment = toMoment(end);\n  const diff = moment.duration(endMoment.diff(startMoment)).asHours();\n  return diff < 0 ? 0 : diff;\n};\n\nexport { diffInHours, toMoment };\n","import { diffInHours } from '../utils/date-utils';\n\nconst totalHoursWorked = attendanceDays =>\n  attendanceDays\n    .map(({ endTime, startTime }) => (startTime && endTime ? diffInHours(startTime, endTime) : 0))\n    .reduce((acc, curr) => acc + curr, 0);\n\nconst addOwners = (myRole, myUid, myOwners, roleOfUserToAdd, userToAdd) => {\n  if (roleOfUserToAdd) {\n    if (myRole === 'ceo')\n      return {\n        ...userToAdd,\n        role: roleOfUserToAdd.substr(0, roleOfUserToAdd.length - 1)\n      };\n    return {\n      ...userToAdd,\n      owners: {\n        ...myOwners,\n        [myRole + 's']: [myUid]\n      },\n      role: roleOfUserToAdd.substr(0, roleOfUserToAdd.length - 1)\n    };\n  }\n  return {\n    ...userToAdd,\n    owners: {\n      ...myOwners,\n      [myRole + 's']: myRole === 'tutor' ? [{ studentStatus: 'normal', uid: myUid }] : [myUid]\n    }\n  };\n};\n\nexport { totalHoursWorked, addOwners };\n","import firebase from 'firebase/app';\nimport 'firebase/firestore';\n\nlet firestoreDb = null;\n\nconst collections = {\n  students: 'Students',\n  attendanceDays: 'AttendanceDays',\n  users: 'Users'\n};\n\nfunction getStudents() {\n  return firestoreDb.collection(collections.students);\n}\n\nfunction getSpecificStudent(studentId) {\n  return firestoreDb.collection(collections.students).doc(studentId);\n}\n\nfunction getSpecificUser(Uid) {\n  return firestoreDb.collection(collections.users).doc(Uid);\n}\n\nfunction getUsers() {\n  return firestoreDb.collection(collections.users);\n}\n\nfunction deleteStudent(studentId) {\n  return firestoreDb\n    .collection(collections.students)\n    .doc(studentId)\n    .delete();\n}\n\nfunction deleteUser(userId) {\n  return firestoreDb\n    .collection(collections.users)\n    .doc(userId)\n    .delete();\n}\n\nconst getDaysCountInMonth = date => new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\n\nconst getAttendance = (tutorUIDs, month) => {\n  if (month) {\n    const firstOfMonth = new Date(month.getFullYear(), month.getMonth());\n    const lastOfMonth = new Date(month.getFullYear(), month.getMonth(), getDaysCountInMonth(month));\n\n    return Promise.all(\n      tutorUIDs.map(tutorUID =>\n        firestoreDb\n          .collection(collections.attendanceDays)\n          .where('owners.tutors', 'array-contains', tutorUID)\n          .where('day', '>=', firstOfMonth)\n          .where('day', '<=', lastOfMonth)\n          .get()\n          .then(snapshot => snapshot.docs.flatMap(doc => doc.data().shifts))\n      )\n    );\n  } else {\n    return Promise.all(\n      tutorUIDs.map(tutorUID =>\n        firestoreDb\n          .collection(collections.attendanceDays)\n          .where('owners.tutors', 'array-contains', tutorUID)\n          .get()\n          .then(snapshot => snapshot.docs.flatMap(doc => doc.data().shifts))\n      )\n    );\n  }\n};\n\nconst getModule = () => {\n  firestoreDb = firebase.firestore();\n  return {\n    deleteStudent,\n    getStudents,\n    deleteUser,\n    getSpecificStudent,\n    getSpecificUser,\n    getUsers,\n    getAttendance\n  };\n};\n\nexport default getModule;\n","import firebase from 'firebase/app';\nimport firestoreModuleInit from './Firestore'\n\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyDEaOcHtrnBB3GQ12z1nR9qRNfwEIsNrFo\",\n    authDomain: \"tamir-db.firebaseapp.com\",\n    databaseURL: \"https://tamir-db.firebaseio.com\",\n    projectId: \"tamir-db\",\n    storageBucket: \"tamir-db.appspot.com\",\n    messagingSenderId: \"463912944330\",\n    appId: \"1:463912944330:web:2a447f8b8212da82\"\n};\nfirebase.initializeApp(firebaseConfig);\n\nconst firestoreModule = firestoreModuleInit()\n\nexport { firestoreModule }","import React from 'react';\nimport { Filters, Editors } from 'react-data-grid-addons';\nimport { TextField } from '@material-ui/core';\nimport ReactDOM from 'react-dom';\nimport 'react-dates/initialize';\nimport PhoneInput from 'react-phone-number-input/react-responsive-ui';\n\nclass BirthDayEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dob: props.value\n    };\n  }\n\n  getValue() {\n    return { dob: this.state.dob };\n  }\n\n  getInputNode() {\n    return ReactDOM.findDOMNode(this).getElementsByTagName('input')[0];\n  }\n\n  handleChangeComplete = event => {\n    this.setState({ dob: event.target.value }, () => this.props.onCommit());\n  };\n\n  render() {\n    return (\n      <form>\n        <TextField\n          id=\"date\"\n          label=\"Birthday\"\n          style={{\n            width: 200\n          }}\n          type=\"date\"\n          defaultValue=\"30-06-2019\"\n          value={this.state.dob}\n          onChange={this.handleChangeComplete}\n          InputLabelProps={{\n            shrink: true\n          }}\n        />\n      </form>\n    );\n  }\n}\n\nclass phoneEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      phone: props.value\n    };\n  }\n  getValue() {\n    return { phone: this.state.phone };\n  }\n  getInputNode() {\n    return ReactDOM.findDOMNode(this).getElementsByTagName('input')[0];\n  }\n  handleChangePhone = name => value => {\n    this.setState({ ...this.state, [name]: value });\n  };\n  render() {\n    return (\n      <form>\n        <PhoneInput\n          country=\"IL\"\n          placeholder=\"נייד\"\n          value={this.state.phone}\n          onChange={this.handleChangePhone('phone')}\n        />\n      </form>\n    );\n  }\n}\n\nconst formatter = ({ value }) => {\n  return <div style={{ textAlign: 'right' }}>{value}</div>;\n};\n\nconst defaultColumnProperties = {\n  filterable: true,\n  sortable: true,\n  resizable: true,\n  editable: true,\n  formatter: formatter,\n  minWidth: 50\n};\n\nconst { DropDownEditor } = Editors;\n\nconst { NumericFilter, AutoCompleteFilter } = Filters;\n\nconst TShirtSizes = [\n  { id: 'xSmall', value: 'XXXS' },\n  { id: 'xSmall', value: 'XXS' },\n  { id: 'xSmall', value: 'XS' },\n  { id: 'small', value: 'S' },\n  { id: 'medium', value: 'M' },\n  { id: 'large', value: 'L' },\n  { id: 'xLarge', value: 'XL' },\n  { id: 'xSmall', value: 'XXL' },\n  { id: 'xSmall', value: 'XXXL' }\n];\n\nconst gradeOptions = [\n  { id: '1', value: 'א' },\n  { id: '2', value: 'ב' },\n  { id: '3', value: 'ג' },\n  { id: '4', value: 'ד' },\n  { id: '5', value: 'ה' },\n  { id: '6', value: 'ו' },\n  { id: '7', value: 'ז' },\n  { id: '8', value: 'ח' },\n  { id: '9', value: 'ט' },\n  { id: '10', value: 'י' },\n  { id: '11', value: 'יא' },\n  { id: '12', value: 'יב' }\n];\n\nconst genderOptions = [{ id: 'male', value: 'ז' }, { id: 'female', value: 'נ' }];\n\nconst TShirtSizesEditor = <DropDownEditor options={TShirtSizes} />;\nconst genderEditor = <DropDownEditor options={genderOptions} />;\nconst classEditor = <DropDownEditor options={gradeOptions} />;\n\nconst columns = [\n  {\n    key: 'id',\n    name: 'No.',\n    width: 40,\n    filterRenderer: NumericFilter,\n    editable: false\n  },\n  {\n    key: 'lastName',\n    name: 'שם משפחה',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'firstName',\n    name: 'שם פרטי',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'groups',\n    name: 'קבוצות',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'phone',\n    name: 'נייד',\n    width: 130,\n    editor: phoneEditor,\n    formatter: false,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'gender',\n    name: 'מין',\n    editor: genderEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'tutor',\n    name: 'מדריך',\n    editable: false,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'coordinator',\n    name: 'רכז שכונה',\n    editable: false,\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'departmentManager',\n    name: 'מנהל מחלקה',\n    editable: false,\n    width: 120,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'schoolGrade',\n    name: 'כיתה',\n    width: 110,\n    editor: classEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'school',\n    name: 'מוסד לימודים',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'address',\n    name: 'כתובת',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'neighborhood',\n    name: 'שכונה',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'dob',\n    name: 'תאריך לידה',\n    editor: BirthDayEditor,\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'govID',\n    name: 'תעודת זהות',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'city',\n    name: 'עיר',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'email',\n    name: 'מייל',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'shirtSize',\n    name: 'מידת חולצה',\n    width: 100,\n    filterRenderer: AutoCompleteFilter,\n    editor: TShirtSizesEditor\n  },\n\n  {\n    key: 'friends',\n    name: 'חברים',\n    width: 120,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'socialCircle',\n    name: 'מעגל חברתי',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'youthGroup',\n    name: 'תנועת נוער',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'interests',\n    name: 'תחומי עניין',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'specialIssues',\n    name: 'בעיות מיוחדות',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'prefferedDays',\n    name: 'ימים מועדפים',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'staffMemberAppointed',\n    name: 'איש צוות מטפל',\n    width: 120,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'comments',\n    name: 'הערות',\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'studentStatus',\n    name: 'סטטוס',\n    filterRenderer: AutoCompleteFilter,\n    editable: false\n  },\n\n  {\n    key: 'lastModified',\n    name: 'שינוי אחרון',\n    filterRenderer: AutoCompleteFilter,\n    editable: false,\n    width: 160\n  },\n  {\n    key: 'check',\n    width: 5\n  }\n].map(c => ({ ...defaultColumnProperties, ...c }));\n\nconst departmentManagerColumns = [\n  {\n    key: 'id',\n    name: 'No.',\n    width: 40,\n    filterRenderer: NumericFilter,\n    editable: false\n  },\n  {\n    key: 'lastName',\n    name: 'שם משפחה',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'firstName',\n    name: 'שם פרטי',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'groups',\n    name: 'קבוצות',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'phone',\n    name: 'נייד',\n    width: 130,\n    editor: phoneEditor,\n    formatter: false,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'gender',\n    name: 'מין',\n    editor: genderEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'tutor',\n    name: 'מדריך',\n    editable: false,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'coordinator',\n    name: 'רכז שכונה',\n    editable: false,\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'schoolGrade',\n    name: 'כיתה',\n    width: 110,\n    editor: classEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'school',\n    name: 'מוסד לימודים',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'address',\n    name: 'כתובת',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'neighborhood',\n    name: 'שכונה',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'dob',\n    name: 'תאריך לידה',\n    editor: BirthDayEditor,\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'govID',\n    name: 'תעודת זהות',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'city',\n    name: 'עיר',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'email',\n    name: 'מייל',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'shirtSize',\n    name: 'מידת חולצה',\n    width: 100,\n    filterRenderer: AutoCompleteFilter,\n    editor: TShirtSizesEditor\n  },\n\n  {\n    key: 'friends',\n    name: 'חברים',\n    width: 120,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'socialCircle',\n    name: 'מעגל חברתי',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'youthGroup',\n    name: 'תנועת נוער',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'interests',\n    name: 'תחומי עניין',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'specialIssues',\n    name: 'בעיות מיוחדות',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'prefferedDays',\n    name: 'ימים מועדפים',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'staffMemberAppointed',\n    name: 'איש צוות מטפל',\n    width: 120,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'comments',\n    name: 'הערות',\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'studentStatus',\n    name: 'סטטוס',\n    filterRenderer: AutoCompleteFilter,\n    editable: false\n  },\n\n  {\n    key: 'lastModified',\n    name: 'שינוי אחרון',\n    filterRenderer: AutoCompleteFilter,\n    editable: false,\n    width: 160\n  },\n  {\n    key: 'check',\n    width: 5\n  }\n].map(c => ({ ...defaultColumnProperties, ...c }));\n\nconst coordinatorColumns = [\n  {\n    key: 'id',\n    name: 'No.',\n    width: 40,\n    filterRenderer: NumericFilter,\n    editable: false\n  },\n  {\n    key: 'lastName',\n    name: 'שם משפחה',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'firstName',\n    name: 'שם פרטי',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'groups',\n    name: 'קבוצות',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'phone',\n    name: 'נייד',\n    width: 130,\n    editor: phoneEditor,\n    formatter: false,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'gender',\n    name: 'מין',\n    editor: genderEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'tutor',\n    name: 'מדריך',\n    editable: false,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'schoolGrade',\n    name: 'כיתה',\n    width: 110,\n    editor: classEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'school',\n    name: 'מוסד לימודים',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'address',\n    name: 'כתובת',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'neighborhood',\n    name: 'שכונה',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'dob',\n    name: 'תאריך לידה',\n    editor: BirthDayEditor,\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'govID',\n    name: 'תעודת זהות',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'city',\n    name: 'עיר',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'email',\n    name: 'מייל',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'shirtSize',\n    name: 'מידת חולצה',\n    width: 100,\n    filterRenderer: AutoCompleteFilter,\n    editor: TShirtSizesEditor\n  },\n\n  {\n    key: 'friends',\n    name: 'חברים',\n    width: 120,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'socialCircle',\n    name: 'מעגל חברתי',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'youthGroup',\n    name: 'תנועת נוער',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'interests',\n    name: 'תחומי עניין',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'specialIssues',\n    name: 'בעיות מיוחדות',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'prefferedDays',\n    name: 'ימים מועדפים',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'staffMemberAppointed',\n    name: 'איש צוות מטפל',\n    width: 120,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'comments',\n    name: 'הערות',\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'studentStatus',\n    name: 'סטטוס',\n    filterRenderer: AutoCompleteFilter,\n    editable: false\n  },\n\n  {\n    key: 'lastModified',\n    name: 'שינוי אחרון',\n    filterRenderer: AutoCompleteFilter,\n    editable: false,\n    width: 160\n  },\n  {\n    key: 'check',\n    width: 5\n  }\n].map(c => ({ ...defaultColumnProperties, ...c }));\n\nconst tutorColumns = [\n  {\n    key: 'id',\n    name: 'No.',\n    width: 40,\n    filterRenderer: NumericFilter,\n    editable: false\n  },\n  {\n    key: 'lastName',\n    name: 'שם משפחה',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'firstName',\n    name: 'שם פרטי',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'groups',\n    name: 'קבוצות',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'phone',\n    name: 'נייד',\n    width: 130,\n    editor: phoneEditor,\n    formatter: false,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'gender',\n    name: 'מין',\n    editor: genderEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'schoolGrade',\n    name: 'כיתה',\n    width: 110,\n    editor: classEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'school',\n    name: 'מוסד לימודים',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'address',\n    name: 'כתובת',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'neighborhood',\n    name: 'שכונה',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'dob',\n    name: 'תאריך לידה',\n    editor: BirthDayEditor,\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'govID',\n    name: 'תעודת זהות',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'city',\n    name: 'עיר',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'email',\n    name: 'מייל',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'shirtSize',\n    name: 'מידת חולצה',\n    width: 100,\n    filterRenderer: AutoCompleteFilter,\n    editor: TShirtSizesEditor\n  },\n\n  {\n    key: 'friends',\n    name: 'חברים',\n    width: 120,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'socialCircle',\n    name: 'מעגל חברתי',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'youthGroup',\n    name: 'תנועת נוער',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'interests',\n    name: 'תחומי עניין',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'specialIssues',\n    name: 'בעיות מיוחדות',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'prefferedDays',\n    name: 'ימים מועדפים',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'staffMemberAppointed',\n    name: 'איש צוות מטפל',\n    width: 120,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'comments',\n    name: 'הערות',\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'studentStatus',\n    name: 'סטטוס',\n    filterRenderer: AutoCompleteFilter,\n    editable: false\n  },\n\n  {\n    key: 'lastModified',\n    name: 'שינוי אחרון',\n    filterRenderer: AutoCompleteFilter,\n    editable: false,\n    width: 160\n  },\n  {\n    key: 'check',\n    width: 5\n  }\n].map(c => ({ ...defaultColumnProperties, ...c }));\n\nconst Columns = role => {\n  if (role === 'departmentManager') return departmentManagerColumns;\n  else if (role === 'coordinator') return coordinatorColumns;\n  else if (role === 'tutor') return tutorColumns;\n  else return columns;\n};\n\nexport { Columns };\n","import { firestoreModule } from '../Firebase/Firebase';\n\nconst getStudents = (setRows, setLoading, uid, role) => {\n  let str = 'owners.' + role + 's';\n  if (role === 'ceo')\n    firestoreModule\n      .getStudents()\n      .onSnapshot(querySnapshot => {\n        setRows(querySnapshot.docs.map(doc => ({ ...doc.data(), fid: doc.id })))\n        setLoading(false);\n      }, err => {\n        console.log(err);\n        setLoading(false);\n      });\n  else if (role === 'tutor')\n    firestoreModule\n      .getStudents()\n      .where(str, 'array-contains', { uid })\n      .onSnapshot(querySnapshot => {\n        console.log(querySnapshot);\n        setRows(querySnapshot.docs.map(doc => ({ ...doc.data(), fid: doc.id })))\n        setLoading(false);\n      }, err => {\n        console.log(err);\n        setLoading(false);\n      });\n  else {\n    firestoreModule\n      .getStudents()\n      .where(str, 'array-contains', uid)\n      .onSnapshot(querySnapshot => {\n        setRows(querySnapshot.docs.map(doc => ({ ...doc.data(), fid: doc.id })))\n        setLoading(false);\n      }, err => {\n        console.log(err);\n        setLoading(false);\n      });\n  }\n};\n\nconst getUsersPhones = (setIDArr) => {\n  firestoreModule\n    .getUsers()\n    .onSnapshot(snapshot => {\n      setIDArr(snapshot.docs.map(doc => doc.data()['phone']));\n    }, err => {\n      console.log(err);\n    });\n}\nconst getStudentsPhones = (setIDArr) => {\n  firestoreModule\n    .getStudents()\n    .onSnapshot(snapshot => {\n      setIDArr(snapshot.docs.map(doc => doc.data()['phone']));\n    }, err => {\n      console.log(err);\n    });\n}\n\nconst getTutors = (setRows, uid, setLoading, role) => {\n\n  let str = 'owners.' + role + 's';\n  if (role === 'ceo') {\n    firestoreModule\n      .getUsers()\n      .onSnapshot(snapshot => {\n        let answer = snapshot.docs.map(doc => ({ ...doc.data(), fid: doc.id }));\n        answer = answer.filter(row => row.role === 'tutor');\n        setRows(answer);\n        setLoading(false);\n      }, err => {\n        console.log(err);\n        setLoading(false);\n      });\n  }\n  else {\n    firestoreModule\n      .getUsers()\n      .where(str, 'array-contains', uid)\n      .onSnapshot(snapshot => {\n        let answer = snapshot.docs.map(doc => ({ ...doc.data(), fid: doc.id }));\n        answer = answer.filter(row => row.role === 'tutor');\n        setRows(answer);\n        setLoading(false);\n      }, err => {\n        console.log(err);\n        setLoading(false);\n      });\n  }\n}\n\nconst getCoordinators = (setRows, uid, setLoading, role) => {\n  if (role === 'departmentManager')\n    firestoreModule\n      .getUsers()\n      .where(\"owners.departmentManagers\", 'array-contains', uid)\n      .onSnapshot(snapshot => {\n        let answer = snapshot.docs.map(doc => ({ ...doc.data(), fid: doc.id }));\n        answer = answer.filter(row => row.role === 'coordinator');\n        setRows(answer);\n        setLoading(false);\n      }, err => {\n        console.log(err);\n        setLoading(false);\n      });\n  else\n    firestoreModule\n      .getUsers()\n      .onSnapshot(snapshot => {\n        let answer = snapshot.docs.map(doc => ({ ...doc.data(), fid: doc.id }));\n        answer = answer.filter(row => row.role === 'coordinator');\n        setRows(answer);\n        setLoading(false);\n      }, err => {\n        console.log(err);\n        setLoading(false);\n      });\n\n}\n\nconst getDepartmentManagers = (setRows, setLoading) => {\n\n  firestoreModule\n    .getUsers()\n    .onSnapshot(snapshot => {\n\n      let answer = snapshot.docs.map(doc => ({ ...doc.data(), fid: doc.id }));\n      answer = answer.filter(row => row.role === 'departmentManager');\n      setRows(answer);\n      setLoading(false);\n    }, err => {\n      console.log(err);\n      setLoading(false);\n    });\n\n}\n\nexport { getStudents, getTutors, getCoordinators, getDepartmentManagers, getUsersPhones, getStudentsPhones };\n","import React, { useState } from 'react';\nimport ReactDataGrid from 'react-data-grid';\nimport { Toolbar, Data } from 'react-data-grid-addons';\nimport {\n  makeStyles,\n  Button,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  DialogContentText,\n  CircularProgress,\n  MenuItem,\n  TextField,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Collapse,\n  Typography\n} from '@material-ui/core/';\nimport { MsgToShow, AssignmentDialog } from '.';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport AddIcon from '@material-ui/icons/Add';\nimport SaveIcon from '@material-ui/icons/Save';\nimport AssignmentIcon from '@material-ui/icons/AssignmentInd';\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport { aoaToFile } from '../utils/excell-utils';\nimport { addOwners } from '../utils/local-db';\nimport green from '@material-ui/core/colors/green';\nimport 'react-responsive-ui/style.css';\nimport PhoneInput from 'react-phone-number-input/react-responsive-ui';\nimport { firestoreModule } from '../Firebase/Firebase';\nimport { Columns } from '../utils/getColumns';\nimport moment from 'moment';\nimport deepcopy from 'deepcopy';\nimport { getStudentsPhones } from '../utils/createRowData';\nimport { entriesToObj } from '../utils/general-utils';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    textAlign: 'center',\n    alignContent: 'center',\n    border: 3,\n    borderRadius: 3,\n    borderColor: 'black',\n    borderWidth: 3,\n    width: '100%',\n    maxWidth: 300\n  },\n  nested: {\n    paddingLeft: theme.spacing(2),\n    border: 3,\n    borderRadius: 3\n  },\n  actionsContainer: {\n    display: 'flex',\n    flexDirection: 'row-reverse'\n  },\n  actions: {\n    display: 'flex',\n    margin: theme.spacing(1),\n    flexDirection: 'column',\n    padding: 5,\n    marginTop: 20\n  },\n  saveContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    margin: theme.spacing(1),\n    marginRight: 'auto',\n    padding: 5,\n    marginTop: 20\n  },\n  button: {\n    borderRadius: 5,\n    fontFamily: 'Arial',\n    fontSize: 18,\n    padding: 4,\n    margin: theme.spacing(1),\n    textAlign: 'center',\n    alignContent: 'center'\n  },\n  formTitle: {\n    textAlign: 'center',\n    font: 30\n  },\n  formText: {\n    textAlign: 'right'\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    textAlign: 'right',\n    width: 150\n  },\n  icon: {\n    margin: theme.spacing(1)\n  },\n  buttonProgress: {\n    color: green[500],\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    marginTop: -12,\n    marginLeft: -12\n  },\n  menu: {\n    width: 150\n  },\n  rowRender: {\n    border: 1,\n    borderRadius: 3\n  }\n}));\n\nconst selectors = Data.Selectors;\n\nconst sortRows = (initialRows, sortColumn, sortDirection) => rows => {\n  const comparer = (a, b) => {\n    if (sortDirection === 'ASC') {\n      return a[sortColumn] > b[sortColumn] ? 1 : -1;\n    } else if (sortDirection === 'DESC') {\n      return a[sortColumn] < b[sortColumn] ? 1 : -1;\n    }\n  };\n  return sortDirection === 'NONE' ? initialRows : [...rows].sort(comparer);\n};\n\nconst handleFilterChange = filter => filters => {\n  const newFilters = { ...filters };\n  if (filter.filterTerm) {\n    newFilters[filter.column.key] = filter;\n  } else {\n    delete newFilters[filter.column.key];\n  }\n  return newFilters;\n};\n\nfunction getValidFilterValues(rows, columnId) {\n  return rows\n    .map(r => r[columnId])\n    .filter((item, i, a) => {\n      return i === a.indexOf(item);\n    });\n}\n\nfunction getRows(rows, filters) {\n  return selectors.getRows({ rows, filters });\n}\n\nconst RowRenderer = ({ row, renderBaseRow, ...props }) => {\n  const rowToRender = {\n    ...row,\n    lastModified: moment(row.lastModified).format('DD/MM/YYYY HH:mm:ss'),\n    dob: row.dob === '' ? '' : moment(row.dob).format('DD/MM/YYYY')\n  };\n  const color = props.idx % 2 ? '#eee' : '#3333';\n  return (\n    <div\n      style={{ backgroundColor: color, backgroundPosition: 'absolute', borderBlockColor: color }}>\n      {renderBaseRow({ ...props, row: rowToRender })}\n    </div>\n  );\n};\n\nfunction TableTabScene({\n  originalRows,\n  setOriginalRows,\n  rows,\n  setMainRows,\n  setSaveButtonColor,\n  saveButtonColor,\n  userStatus,\n  role,\n  uid,\n  tutors,\n  coordinators,\n  departmentManagers\n}) {\n  const [selectedIndexes, setSelectedIndexes] = useState([]);\n  const [filters, setFilters] = useState({});\n  let [rowsCopy, setRows] = useState(rows);\n  const [loading, setLoading] = useState(false);\n  const [loadingPage, setLoadingPage] = useState(true);\n  const [msgState, setMsgState] = useState({ title: '', body: '', visible: false });\n  const [formState, setFormState] = useState({\n    firstNameErr: false,\n    lastNameErr: false,\n    genderErr: false,\n    phoneErr: false\n  });\n  const [assignmentDialogType, setAssignmentDialogType] = useState('');\n  const [openForm, setOpenForm] = useState(false);\n  let filteredRows = getRows(rowsCopy, filters);\n  const [newStudent, setNewStudent] = useState({});\n  const [loadingAdd, setLoadingAdd] = useState(false);\n  const [loadingSave, setLoadingSave] = useState(false);\n  const [openDeleteCheck, setOpenDeleteCheck] = useState(false);\n  const [openAssignMenu, setOpenAssignMenu] = useState(false);\n  const [studentsPhones, setStudentsPhones] = useState([]);\n\n  const classes = useStyles();\n  const genders = [\n    {\n      value: 'ז',\n      label: 'זכר'\n    },\n    {\n      value: 'נ',\n      label: 'נקבה'\n    }\n  ];\n\n  function handleClickOnAssignMenu() {\n    setOpenAssignMenu(!openAssignMenu);\n  }\n\n  const removeEmptyFields = obj => entriesToObj(Object.entries(obj).filter(([, v]) => v));\n\n  const fixStudentFields = student => {\n    columns.forEach(({ key }) => {\n      if (student.hasOwnProperty(key)) {\n        if (\n          (key === 'lastModified' || key === 'dob') &&\n          student[key] !== undefined &&\n          student[key] !== null &&\n          student[key] !== ''\n        ) {\n          student[key] = student[key] instanceof Date ? student[key] : student[key].toDate();\n        }\n        if (student[key] === null || student[key] === undefined) {\n          student[key] = '';\n        }\n      } else {\n        student = { ...student, [key]: key === 'lastModified' ? new Date() : '' };\n      }\n    });\n    return student;\n  };\n\n  const fixStudentsFields = arr => {\n    return arr.map(fixStudentFields);\n  };\n\n  const getOptionsToAssign = type => {\n    let answer = [{ firstName: 'None' }];\n    if (type === 'tutors' && tutors.length !== 0) answer = [...answer, ...tutors];\n    else if (type === 'coordinators' && coordinators.length !== 0)\n      answer = [...answer, ...coordinators];\n    else if (departmentManagers.length !== 0) answer = [...answer, ...departmentManagers];\n    return answer;\n  };\n\n  const onGridRowsUpdated = ({ fromRow, toRow, updated }) => {\n    if (updated.phone !== undefined) {\n      if (!isValidPhone(updated.phone)) {\n        setMsgState({\n          title: 'עריכת נייד',\n          body: '!נא להכניס נייד תקין',\n          visible: true\n        });\n        return;\n      }\n      if (checkIfStudentExist(updated.phone)) {\n        setMsgState({\n          title: 'עריכת נייד',\n          body: '!הנייד כבר קיים במערכת',\n          visible: true\n        });\n        return;\n      }\n    }\n    setSaveButtonColor('secondary');\n    const newRows = deepcopy(rowsCopy);\n    for (let i = 0; i < newRows.length; i++) {\n      if (i >= fromRow && i <= toRow) {\n        newRows[i] = { ...rowsCopy[i], ...updated };\n        newRows[i].lastModified = updateDate();\n\n      } else {\n        newRows[i] = { ...rowsCopy[i] };\n        newRows[i].lastModified = new Date(newRows[i].lastModified);\n\n      }\n    }\n\n    setRows(newRows);\n    setMainRows(newRows);\n  };\n\n  const updateDate = () => {\n    return new Date();\n  };\n\n  const updateNums = () => {\n    for (let i = 0; i < rowsCopy.length; i++) {\n      rowsCopy[i].id = i + 1;\n    }\n    setRows(rowsCopy);\n    setMainRows(rowsCopy);\n  };\n\n  const handleChange = name => event => {\n    let fieldName = name + 'Err';\n    setFormState({ ...formState, [fieldName]: false });\n    setNewStudent({ ...newStudent, [name]: event.target.value });\n  };\n\n  const handleChangePhone = name => value => {\n    setNewStudent({ ...newStudent, [name]: value });\n  };\n\n  function handleClickOpenForm() {\n    setNewStudent({\n      id: rowsCopy.length,\n      studentStatus: 'לא שובץ',\n      lastModified: updateDate(),\n      ...newStudent\n    });\n    setOpenForm(true);\n  }\n\n  function handleCloseForm() {\n    setOpenForm(false);\n    setNewStudent({});\n  }\n\n  function handleOpenCheckDelete() {\n    if (selectedIndexes.length > 0) setOpenDeleteCheck(true);\n  }\n  function handleCloseCheckDelete() {\n    setOpenDeleteCheck(false);\n  }\n\n  const deleteRow = () => {\n    if (selectedIndexes.length === 0) return;\n    setLoading(true);\n    const fids = [];\n    selectedIndexes.forEach(idx => fids.push(rowsCopy[idx].fid));\n    if (role === 'ceo') fids.forEach(id => firestoreModule.deleteStudent(id));\n    else {\n      let dataToRemove = '';\n      let str = 'owners.' + role + 's';\n      if (role === 'tutor') {\n        dataToRemove = { studentStatus: 'normal', uid: uid };\n        fids.forEach(id =>\n          firestoreModule\n            .getSpecificStudent(id)\n            .update({ [str]: firebase.firestore.FieldValue.arrayRemove(dataToRemove) })\n        );\n      } else\n        fids.forEach(id =>\n          firestoreModule\n            .getSpecificStudent(id)\n            .update({ [str]: firebase.firestore.FieldValue.arrayRemove(uid) })\n        );\n    }\n\n    let newArr = rowsCopy.filter((row, i) => !selectedIndexes.includes(i));\n    while (selectedIndexes.length !== 0) {\n      selectedIndexes.shift();\n    }\n    rowsCopy = newArr;\n    setRows(rowsCopy);\n    setMainRows(rowsCopy);\n    setLoading(false);\n    handleCloseCheckDelete();\n    setSaveButtonColor('secondary');\n    setMsgState({\n      title: 'מחיקת חניכים',\n      body: '!כל החניכים שנבחרו נמחקו בהצלחה',\n      visible: true\n    });\n    updateNums();\n  };\n\n  const removeUnnecessaryFields = student => {\n    delete student.check;\n    delete student.id;\n    delete student.studentStatus;\n    delete student.fid;\n    delete student.tutor;\n    delete student.coordinator;\n    delete student.departmentManager;\n  };\n\n  function checkIfStudentExist(phone) {\n    return studentsPhones.includes(phone);\n  }\n\n  function isValidPhone(phone) {\n    if (phone.length === 13) return true;\n    return false;\n  }\n\n  function formValidation() {\n    if (newStudent.firstName === '' || !newStudent.hasOwnProperty('firstName')) {\n      setFormState({ firstNameErr: true });\n      return;\n    } else {\n      setFormState({ firstNameErr: false });\n    }\n    if (newStudent.lastName === '' || !newStudent.hasOwnProperty('lastName')) {\n      setFormState({ lastNameErr: true });\n      return;\n    } else {\n      setFormState({ lastNameErr: false });\n    }\n    if (newStudent.gender === '' || !newStudent.hasOwnProperty('gender')) {\n      setFormState({ genderErr: true });\n      return;\n    } else {\n      setFormState({ genderErr: false });\n    }\n    if (\n      newStudent.phone === '' ||\n      !newStudent.hasOwnProperty('phone') ||\n      newStudent.phone === undefined\n    ) {\n      setFormState({ phoneErr: true });\n      return;\n    } else {\n      setFormState({ phoneErr: false });\n    }\n\n    if (newStudent.phone && !isValidPhone(newStudent.phone)) {\n      setMsgState({\n        title: 'הוספת חניך',\n        body: '!נא להכניס נייד תקין',\n        visible: true\n      });\n      return;\n    }\n    if (checkIfStudentExist(newStudent.phone)) {\n      setMsgState({\n        title: 'הוספת חניך',\n        body: '!הנייד כבר קיים במערכת',\n        visible: true\n      });\n      return;\n    }\n    addStudent();\n  }\n\n  const addStudent = () => {\n    setLoadingAdd(true);\n    handleCloseForm();\n    let fixedStudent = fixStudentFields(newStudent);\n    removeUnnecessaryFields(fixedStudent);\n    fixedStudent = addOwners(role, uid, userStatus.owners, null, fixedStudent);\n    fixedStudent = removeEmptyFields(fixedStudent);\n    firestoreModule\n      .getStudents()\n      .add(fixedStudent)\n      .then(ref => {\n        fixedStudent = fixStudentFields(newStudent);\n        fixedStudent = { ...fixedStudent, fid: ref.id };\n        fixedStudent = addOwners(role, uid, userStatus.owners, null, fixedStudent);\n        rowsCopy.unshift(fixedStudent);\n        updateNums();\n        rowsCopy = getMissedDetailsForAllStudents();\n        setRows(rowsCopy);\n        setMainRows(rowsCopy);\n        setSaveButtonColor('secondary');\n        setLoadingAdd(false);\n        setMsgState({\n          title: 'הוספת חניך',\n          body: '!החניך הוסף בהצלחה',\n          visible: true\n        });\n      })\n      .catch(function (error) {\n        console.log('Error adding student', error);\n        setLoadingAdd(false);\n        setMsgState({\n          title: 'הוספת חניך',\n          body: '!ארעה שגיאה בהוספת החניך',\n          visible: true\n        });\n      });\n  };\n\n  const onRowsSelected = rows => {\n    setSelectedIndexes(selectedIndexes.concat(rows.map(r => r.rowIdx)));\n  };\n\n  const onRowsDeselected = rows => {\n    let rowIndexes = rows.map(r => r.rowIdx);\n    const newSelectedIndexes = selectedIndexes.filter(i => rowIndexes.indexOf(i) === -1);\n    setSelectedIndexes(newSelectedIndexes);\n  };\n\n  const rowText = selectedIndexes.length === 1 ? 'חניך בחור' : 'חניכים בחורים';\n\n  const columns = Columns(role);\n  const columnsToShow = [...columns];\n\n  let tutorsOptions = getOptionsToAssign('tutors');\n\n  let coordinatorsOptions = getOptionsToAssign('coordinators');\n\n  let departmentManagersOptions = getOptionsToAssign('departmentManagers');\n\n  const studentToArr = student => columns.map(r => student[r.key]);\n\n  const exportToExcel = () => {\n    const columnNames = columns.map(r => r.name);\n    const aoa = [columnNames].concat(rowsCopy.map(studentToArr));\n    aoaToFile({ fileName: 'רשימת חניכים', aoa });\n  };\n\n  const getTutorFromFid = fid => {\n    for (let i = 0; i < tutors.length; i++) {\n      if (tutors[i].fid === fid) return tutors[i];\n    }\n    return undefined;\n  };\n\n  const getCoordinatorFromFid = fid => {\n    for (let i = 0; i < coordinators.length; i++) {\n      if (coordinators[i].fid === fid) return coordinators[i];\n    }\n    return undefined;\n  };\n\n  const getDepartmentManagerFromFid = fid => {\n    for (let i = 0; i < departmentManagers.length; i++) {\n      if (departmentManagers[i].fid === fid) return departmentManagers[i];\n    }\n    return undefined;\n  };\n\n  const getMissedDetailsForStudent = student => {\n    let newSt = { ...student };\n    let status = '';\n    let tutor = '';\n    let coordinator = '';\n    let departmentManager = '';\n\n    if (newSt.owners !== null && newSt.owners !== undefined) {\n      if (newSt.owners.hasOwnProperty('tutors') && newSt.owners.tutors.length > 0) {\n        let arr = newSt.owners.tutors;\n        for (let i = 0; i < arr.length; i++) {\n          if (arr[i].studentStatus === 'normal') {\n            status = 'גויס';\n            let temp = getTutorFromFid(arr[i].uid);\n            if (temp !== undefined) tutor = temp.firstName + ' ' + temp.lastName;\n            break;\n          } else if (arr[i].studentStatus === 'potential') {\n            status = 'שובץ';\n            let temp = getTutorFromFid(arr[i].uid);\n            if (temp !== undefined) tutor = temp.firstName + ' ' + temp.lastName;\n          }\n        }\n      }\n\n      if (newSt.owners.hasOwnProperty('coordinators') && newSt.owners.coordinators.length > 0) {\n        let temp = getCoordinatorFromFid(newSt.owners.coordinators[0]);\n        if (temp !== undefined) coordinator = temp.firstName + ' ' + temp.lastName;\n      }\n\n      if (\n        newSt.owners.hasOwnProperty('departmentManagers') &&\n        newSt.owners.departmentManagers.length > 0\n      ) {\n        let temp = getDepartmentManagerFromFid(newSt.owners.departmentManagers[0]);\n        if (temp !== undefined) departmentManager = temp.firstName + ' ' + temp.lastName;\n      }\n      newSt = {\n        ...newSt,\n        studentStatus: status,\n        tutor: tutor,\n        departmentManager: departmentManager,\n        coordinator: coordinator\n      };\n    }\n\n    return newSt;\n  };\n\n  const getMissedDetailsForAllStudents = () => {\n    return rowsCopy.map(getMissedDetailsForStudent);\n  };\n\n  const firstTimeLoading = () => {\n    updateNums();\n    let newRows = fixStudentsFields(rowsCopy);\n    rowsCopy = [...newRows];\n    newRows = getMissedDetailsForAllStudents();\n    getStudentsPhones(setStudentsPhones);\n    setRows(newRows);\n    setMainRows([...newRows]);\n    setLoadingPage(false);\n  };\n\n  if (loadingPage) firstTimeLoading();\n\n  const deleteUnnecessaryStudent = () => {\n    let fids = rowsCopy.map(row => row.fid);\n    originalRows = originalRows.filter(row => fids.includes(row.fid));\n    setOriginalRows([...originalRows]);\n  };\n\n  const getStudentsToUpdate = () => {\n    let ids = [];\n    let students = [];\n    rowsCopy.map(row => ids.push({ id: row.id - 1, fid: row.fid }));\n    for (let i = 0; i < originalRows.length; i++) {\n      for (let j = 0; j < ids.length; j++) {\n        if (originalRows[i].fid === ids[j].fid) {\n          if (rowsCopy[ids[j].id] !== undefined) {\n            if (\n              originalRows[i].lastModified.toDate().getTime() !==\n              new Date(rowsCopy[ids[j].id].lastModified).getTime()\n            ) {\n              students.push(rowsCopy[ids[j].id]);\n            }\n          }\n        }\n      }\n    }\n\n    return students;\n  };\n\n  const makeUpdate = arr => {\n    arr.forEach(student => {\n      let temp = { ...student };\n      removeUnnecessaryFields(temp);\n      temp = removeEmptyFields(temp);\n      firestoreModule.getSpecificStudent(student.fid).set(temp);\n    });\n  };\n\n  const fixStudentDOB = student => {\n    if (student.hasOwnProperty('dob')) {\n      if (student.dob !== undefined && student.dob !== null && student.dob !== '') {\n        student.dob = student.dob instanceof Date ? student.dob : new Date(student.dob);\n      }\n    }\n\n    return student;\n  };\n\n  const fixStudentsDOB = arr => {\n    return arr.map(fixStudentDOB);\n  };\n\n  const saveUpdates = () => {\n    setLoadingSave(true);\n    if (originalRows.length !== rowsCopy.length) deleteUnnecessaryStudent();\n    let arr = getStudentsToUpdate();\n    arr = fixStudentsDOB(arr);\n    if (arr.length > 0) makeUpdate(arr);\n    let newRows = fixStudentsFields(rowsCopy);\n    rowsCopy = [...newRows];\n    newRows = getMissedDetailsForAllStudents();\n    setRows(newRows);\n    setMainRows([...newRows]);\n    updateNums();\n    setLoadingSave(false);\n    setSaveButtonColor('default');\n    setMsgState({\n      title: 'שמירת שינויים',\n      body: 'כל השינויים נשמרו בהצלחה',\n      visible: true\n    });\n  };\n\n  return (\n    <div>\n      <div className={classes.actionsContainer}>\n        <div className={classes.actions}>\n          <Button\n            style={{ color: '#0089c6', border: 3, borderStyle: 'solid' }}\n            variant=\"outlined\"\n            disabled={loadingAdd}\n            size=\"large\"\n            className={classes.button}\n            onClick={() => handleClickOpenForm()}>\n            הוסף חניך\n            <AddIcon />\n            {loadingAdd && <CircularProgress size={24} className={classes.buttonProgress} />}\n          </Button>\n\n          <MsgToShow\n            {...msgState}\n            handleClose={() => setMsgState({ ...msgState, visible: false })}\n          />\n\n          <Dialog\n            disableBackdropClick\n            disableEscapeKeyDown\n            open={openForm}\n            onClose={handleCloseForm}\n            aria-labelledby=\"form-dialog-title\">\n            <form autoComplete=\"on\">\n              <DialogTitle id=\"form-dialog-title\" className={classes.formTitle}>\n                הוספת חניך\n              </DialogTitle>\n              <DialogContent>\n                <DialogContentText className={classes.formText}>\n                  ** נא למלא את כל השדות **\n                </DialogContentText>\n                <TextField\n                  required\n                  autoFocus\n                  error={formState.firstNameErr}\n                  variant=\"outlined\"\n                  margin=\"dense\"\n                  id=\"firstName\"\n                  className={classes.textField}\n                  placeholder=\"דוד\"\n                  label=\"שם פרטי\"\n                  type=\"name\"\n                  onChange={handleChange('firstName')}\n                />\n                <TextField\n                  required\n                  error={formState.lastNameErr}\n                  variant=\"outlined\"\n                  margin=\"dense\"\n                  id=\"lastName\"\n                  className={classes.textField}\n                  placeholder=\"כהן\"\n                  label=\"שם המשפחה\"\n                  type=\"name\"\n                  onChange={handleChange('lastName')}\n                />\n\n                <TextField\n                  required\n                  error={formState.genderErr}\n                  variant=\"outlined\"\n                  select\n                  id=\"gender\"\n                  margin=\"dense\"\n                  label=\"מין\"\n                  className={classes.textField}\n                  onChange={handleChange('gender')}\n                  value={newStudent.gender}\n                  SelectProps={{\n                    MenuProps: {\n                      className: classes.menu\n                    }\n                  }}>\n                  {genders.map(option => (\n                    <MenuItem key={option.value} value={option.value}>\n                      {option.label}\n                    </MenuItem>\n                  ))}\n                </TextField>\n\n                <PhoneInput\n                  error={formState.phoneErr}\n                  country=\"IL\"\n                  label=\"מס' טלפון\"\n                  className={classes.textField}\n                  placeholder=\"נייד\"\n                  onChange={handleChangePhone('phone')}\n                />\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  onClick={handleCloseForm}\n                  color=\"secondary\"\n                  className={classes.button}\n                  size=\"large\">\n                  בטל\n                </Button>\n                <Button\n                  onClick={() => formValidation()}\n                  color=\"primary\"\n                  className={classes.button}\n                  size=\"large\">\n                  הוסף\n                </Button>\n              </DialogActions>\n            </form>\n          </Dialog>\n        </div>\n\n        <div className={classes.actions}>\n          <Button\n            style={{ color: '#0089c6', border: 3, borderStyle: 'solid' }}\n            variant=\"outlined\"\n            size=\"large\"\n            className={classes.button}\n            onClick={() => exportToExcel()}>\n            ייצא לאקסל\n            <SaveIcon />\n          </Button>\n        </div>\n\n        <div className={classes.saveContainer}>\n          <Button\n            style={{ border: 3, borderStyle: 'solid' }}\n            variant=\"outlined\"\n            size=\"large\"\n            color={saveButtonColor}\n            className={classes.button}\n            onClick={() => (saveButtonColor === 'secondary' ? saveUpdates() : {})}\n            disabled={loadingSave}>\n            שמור שינויים\n            <SaveIcon />\n            {loadingSave && <CircularProgress size={24} className={classes.buttonProgress} />}\n          </Button>\n        </div>\n      </div>\n\n      <ReactDataGrid\n        rowKey=\"id\"\n        columns={columnsToShow.reverse()}\n        rowGetter={i => filteredRows[i]}\n        rowsCount={filteredRows.length}\n        minHeight={350}\n        toolbar={<Toolbar enableFilter={true} />}\n        onAddFilter={filter => setFilters(handleFilterChange(filter))}\n        onClearFilters={() => setFilters({})}\n        getValidFilterValues={columnKey => getValidFilterValues(rowsCopy, columnKey)}\n        onGridSort={(sortColumn, sortDirection) =>\n          setRows(sortRows(rowsCopy, sortColumn, sortDirection))\n        }\n        onGridRowsUpdated={onGridRowsUpdated}\n        rowRenderer={RowRenderer}\n        enableCellSelect={true}\n        rowSelection={{\n          showCheckbox: true,\n          enableShiftSelect: true,\n          onRowsSelected: onRowsSelected,\n          onRowsDeselected: onRowsDeselected,\n          selectBy: {\n            indexes: selectedIndexes\n          }\n        }}\n      />\n\n      {selectedIndexes.length !== 0 ? (\n        <div className={classes.actionsContainer}>\n          <List component=\"nav\" className={classes.root}>\n            <ListItem button onClick={handleClickOnAssignMenu} className={classes.nested}>\n              <ListItemIcon>\n                <AssignmentIcon />\n              </ListItemIcon>\n              <ListItemText primary=\"שבץ חניכים שנבחרו\" style={{ textAlign: 'center' }} />\n              {openAssignMenu ? <ExpandLess /> : <ExpandMore />}\n            </ListItem>\n            <Collapse in={openAssignMenu} timeout=\"auto\" unmountOnExit className={classes.nested}>\n              <List component=\"div\" disablePadding>\n                {role !== 'tutor' ? (\n                  <ListItem\n                    button\n                    onClick={() =>\n                      selectedIndexes.length !== 0\n                        ? setAssignmentDialogType('tutors')\n                        : setAssignmentDialogType('')\n                    }\n                    className={classes.nested}>\n                    <ListItemText\n                      primary=\"למדריך\"\n                      style={{ textAlign: 'right', marginRight: '33%' }}\n                      className={classes.nested}\n                    />\n                  </ListItem>\n                ) : null}\n                <AssignmentDialog\n                  title=\"בחר מדריך\"\n                  optionsArr={tutorsOptions}\n                  visible={assignmentDialogType === 'tutors'}\n                  handleClose={chosenOption => {\n                    setAssignmentDialogType('');\n                    if (selectedIndexes.length !== 0 && chosenOption !== 'Cancel') {\n                      selectedIndexes.map(i => {\n                        if (chosenOption !== 'None') {\n                          let owners = rowsCopy[i].owners;\n                          if (owners.hasOwnProperty('tutors')) {\n                            owners = owners.tutors;\n                            let uids = owners.map(o => o.uid);\n                            if (!uids.includes(chosenOption))\n                              rowsCopy[i].owners.tutors.push({\n                                studentStatus: 'potential',\n                                uid: chosenOption\n                              });\n                          } else {\n                            owners = { ...owners, tutors: [] };\n                            owners.tutors.push({ studentStatus: 'potential', uid: chosenOption });\n                            rowsCopy[i].owners = owners;\n                          }\n                        } else {\n                          rowsCopy[i].owners.tutors = [];\n                        }\n                        firestoreModule\n                          .getSpecificStudent(rowsCopy[i].fid)\n                          .update({ owners: rowsCopy[i].owners });\n                        rowsCopy[i].lastModified = updateDate();\n                        rowsCopy = getMissedDetailsForAllStudents();\n                        setRows(rowsCopy);\n                        setMainRows(rowsCopy);\n                        return [];\n                      });\n                      if (chosenOption !== 'None')\n                        setMsgState({\n                          title: 'שיבוץ חניכים למדריך',\n                          body: 'כל החניכים שנבחרו שובצו בהצלחה',\n                          visible: true\n                        });\n                      while (selectedIndexes.length !== 0) {\n                        selectedIndexes.shift();\n                      }\n                      setSaveButtonColor('secondary');\n                    }\n                  }}\n                />\n\n                {role === 'departmentManager' || role === 'ceo' ? (\n                  <ListItem\n                    button\n                    onClick={() =>\n                      selectedIndexes.length !== 0\n                        ? setAssignmentDialogType('coordinators')\n                        : setAssignmentDialogType('')\n                    }>\n                    <ListItemText\n                      primary=\"לרכז\"\n                      style={{ textAlign: 'right', marginRight: '33%' }}\n                    />\n                  </ListItem>\n                ) : null}\n                <AssignmentDialog\n                  title=\"בחר רכז\"\n                  optionsArr={coordinatorsOptions}\n                  visible={assignmentDialogType === 'coordinators'}\n                  handleClose={chosenOption => {\n                    setAssignmentDialogType('');\n                    if (selectedIndexes.length !== 0 && chosenOption !== 'Cancel') {\n                      selectedIndexes.map(i => {\n                        if (chosenOption !== 'None') {\n                          let owners = rowsCopy[i].owners;\n                          if (owners.hasOwnProperty('coordinators')) {\n                            owners = owners.coordinators;\n                            if (!owners.includes(chosenOption))\n                              rowsCopy[i].owners.coordinators.push(chosenOption);\n                          } else {\n                            owners = { ...owners, coordinators: [] };\n                            owners.coordinators.push(chosenOption);\n                            rowsCopy[i].owners = owners;\n                          }\n                        } else {\n                          rowsCopy[i].owners.coordinators = [];\n                        }\n                        firestoreModule\n                          .getSpecificStudent(rowsCopy[i].fid)\n                          .update({ owners: rowsCopy[i].owners });\n                        rowsCopy[i].lastModified = updateDate();\n                        rowsCopy = getMissedDetailsForAllStudents();\n                        setRows(rowsCopy);\n                        setMainRows(rowsCopy);\n                        return [];\n                      });\n                      if (chosenOption !== 'None')\n                        setMsgState({\n                          title: 'שיבוץ חניכים לרכז',\n                          body: 'כל החניכים שנבחרו שובצו בהצלחה',\n                          visible: true\n                        });\n\n                      while (selectedIndexes.length !== 0) {\n                        selectedIndexes.shift();\n                      }\n                      setSaveButtonColor('secondary');\n                    }\n                    return;\n                  }}\n                />\n\n                {role === 'ceo' ? (\n                  <ListItem\n                    button\n                    className={classes.nested}\n                    onClick={() =>\n                      selectedIndexes.length !== 0\n                        ? setAssignmentDialogType('departmentManagers')\n                        : setAssignmentDialogType('')\n                    }>\n                    <ListItemText\n                      primary=\"למנהל מחלקה\"\n                      style={{ textAlign: 'right', marginRight: '33%' }}\n                    />\n                  </ListItem>\n                ) : null}\n                <AssignmentDialog\n                  title=\"בחר מנהל מחלקה\"\n                  optionsArr={departmentManagersOptions}\n                  visible={assignmentDialogType === 'departmentManagers'}\n                  handleClose={chosenOption => {\n                    setAssignmentDialogType('');\n                    if (selectedIndexes.length !== 0 && chosenOption !== 'Cancel') {\n                      selectedIndexes.map(i => {\n                        if (chosenOption !== 'None') {\n                          let owners = rowsCopy[i].owners;\n                          if (owners.hasOwnProperty('departmentManagers')) {\n                            owners = owners.departmentManagers;\n\n                            if (!owners.includes(chosenOption))\n                              rowsCopy[i].owners.departmentManagers.push(chosenOption);\n                          } else {\n                            owners = { ...owners, departmentManagers: [] };\n                            owners.departmentManagers.push(chosenOption);\n                            rowsCopy[i].owners = owners;\n                          }\n                        } else {\n                          rowsCopy[i].owners.departmentManagers = [];\n                        }\n                        firestoreModule\n                          .getSpecificStudent(rowsCopy[i].fid)\n                          .update({ owners: rowsCopy[i].owners });\n                        rowsCopy[i].lastModified = updateDate();\n                        rowsCopy = getMissedDetailsForAllStudents();\n                        setRows(rowsCopy);\n                        setMainRows(rowsCopy);\n                        return [];\n                      });\n                      if (chosenOption !== 'None')\n                        setMsgState({\n                          title: 'שיבוץ חניכים למנהל מחלקה',\n                          body: 'כל החניכים שנבחרו שובצו בהצלחה',\n                          visible: true\n                        });\n                      while (selectedIndexes.length !== 0) {\n                        selectedIndexes.shift();\n                      }\n                      setSaveButtonColor('secondary');\n                    }\n                    return;\n                  }}\n                />\n              </List>\n            </Collapse>\n          </List>\n          <List\n            component=\"nav\"\n            className={classes.root}\n            style={{ maxWidth: 250, border: 3, borderColor: 'black' }}>\n            <ListItem button onClick={handleOpenCheckDelete} disabled={loading}>\n              <ListItemIcon>\n                <DeleteIcon />\n              </ListItemIcon>\n              <ListItemText primary=\"מחק חניכים שנבחרו\" style={{ textAlign: 'right' }} />\n              {loading && <CircularProgress size={24} className={classes.buttonProgress} />}\n            </ListItem>\n            <Dialog\n              disableBackdropClick\n              disableEscapeKeyDown\n              open={openDeleteCheck}\n              onClose={handleCloseCheckDelete}>\n              <DialogTitle className={classes.formTitle}>{'מחיקת חניכים'}</DialogTitle>\n              <DialogContent>\n                <DialogContentText className={classes.formText}>\n                  אתה עומד למחוק את כל החניכים שנבחרו\n                </DialogContentText>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  onClick={handleCloseCheckDelete}\n                  color=\"primary\"\n                  className={classes.button}\n                  size=\"large\">\n                  בטל\n                </Button>\n                <Button\n                  onClick={deleteRow}\n                  color=\"secondary\"\n                  className={classes.button}\n                  size=\"large\">\n                  אשר\n                </Button>\n              </DialogActions>\n            </Dialog>\n          </List>\n          <List className={classes.saveContainer}>\n            <Typography style={{ color: '#3F51B5', font: 25 }} variant=\"subtitle1\">\n              {selectedIndexes.length} {rowText}\n            </Typography>\n          </List>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nexport { TableTabScene };\n","import React, { useState } from 'react';\n\nimport {\n    makeStyles,\n    Button,\n    List,\n    Radio,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    RadioGroup,\n    FormControlLabel\n} from '@material-ui/core/';\n\nfunction AssignmentRow(props) {\n    const { title, optionsArr, onClose, value: valueProp, open, ...other } = props;\n    const [value, setValue] = useState(valueProp);\n    const radioGroupRef = React.useRef(null);\n    const classes = useStyles();\n\n    React.useEffect(() => {\n        if (!open) {\n            setValue(valueProp);\n        }\n    }, [valueProp, open]);\n\n    function handleEntering() {\n        if (radioGroupRef.current != null) {\n            radioGroupRef.current.focus();\n        }\n    }\n\n    function handleCancel() {\n        onClose('Cancel');\n    }\n\n    function handleOk() {\n        onClose(value);\n    }\n\n    function handleChange(event, newValue) {\n        setValue(newValue);\n    }\n\n    return (\n        <Dialog\n            disableBackdropClick\n            disableEscapeKeyDown\n            onEntering={handleEntering}\n            aria-labelledby=\"confirmation-dialog-title\"\n            open={open}\n            {...other}\n        >\n            <DialogTitle id=\"confirmation-dialog-title\" className={classes.title}>{title}</DialogTitle>\n            <DialogContent dividers>\n                <RadioGroup\n                    ref={radioGroupRef}\n                    value={value}\n                    onChange={handleChange}\n                    className={classes.options}\n\n                >\n                    {optionsArr.map(option => {\n\n                        let label = '';\n                        if (option.firstName === 'None') {\n                            label = option.firstName\n                            return <FormControlLabel value={option.firstName} key={0} control={<Radio color=\"primary\" />} label={label} labelPlacement=\"start\" />\n                        }\n                        else {\n                            if (option.neighborhood !== undefined && option.neighborhood !== null)\n                                label += option.neighborhood;\n                            if (option.city !== undefined && option.city !== null)\n                                label += ', ' + option.city + ', ';\n                            label += option.firstName + ' ' + option.lastName;\n                            return <FormControlLabel value={option.fid} key={option.fid} control={<Radio color=\"primary\" />} label={label} labelPlacement=\"start\" />\n                        }\n\n                    }\n                    )}\n                </RadioGroup>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleCancel} color=\"secondary\" className={classes.button} size='large'>\n                    בטל\n          </Button>\n                <Button onClick={handleOk} color=\"primary\" className={classes.button} size='large'>\n                    שבץ\n          </Button>\n            </DialogActions>\n        </Dialog>\n    );\n}\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        width: '100%',\n        maxWidth: 360,\n        backgroundColor: theme.palette.background.paper,\n    },\n    \n    button: {\n        borderRadius: 5,\n        fontFamily: 'Arial',\n        fontSize: 18,\n        padding: 4,\n        height: 40,\n        width: 60,\n    },\n    paper: {\n        width: '80%',\n        maxHeight: 435,\n    },\n    title: {\n        textAlign: 'center',\n        fontSize: 30,\n    },\n    options: {\n        textAlign: 'right',\n        alignContent: 'right',\n    }\n}));\n\nfunction AssignmentDialog({ title, optionsArr, visible, handleClose }) {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <List component=\"div\" role=\"list\">\n                <AssignmentRow\n                    classes={{ paper: classes.paper, }}\n                    optionsArr={optionsArr}\n                    title={title}\n                    keepMounted\n                    open={visible}\n                    onClose={handleClose}\n                    value={'None'}\n                />\n            </List>\n        </div>\n    );\n}\n\nexport { AssignmentDialog };","import React from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport { lighten, makeStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TablePagination from '@material-ui/core/TablePagination';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Button from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nfunction desc(a, b, orderBy) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n  return 0;\n}\n\nfunction stableSort(array, cmp) {\n  const stabilizedThis = array.map((el, index) => [el, index]);\n  stabilizedThis.sort((a, b) => {\n    const order = cmp(a[0], b[0]);\n    if (order !== 0) return order;\n    return a[1] - b[1];\n  });\n  return stabilizedThis.map(el => el[0]);\n}\n\nfunction getSorting(order, orderBy) {\n  return order === 'desc' ? (a, b) => desc(a, b, orderBy) : (a, b) => -desc(a, b, orderBy);\n}\n\nconst headRows = [\n  { id: 'neighborhood', numeric: false, label: 'שכונה' },\n  { id: 'city', numeric: false, label: 'עיר' },\n  { id: 'gender', numeric: false, label: 'מין' },\n  { id: 'firstName', numeric: false, label: 'שם פרטי' },\n  { id: 'lastName', numeric: false, label: 'שם משפחה' }\n];\n\nfunction EnhancedTableHead(props) {\n  const {\n    onSelectAllClick,\n    order,\n    orderBy,\n    numSelected,\n    rowCount,\n    onRequestSort,\n    multiSelect\n  } = props;\n  const createSortHandler = property => event => {\n    onRequestSort(event, property);\n  };\n\n  return (\n    <TableHead>\n      <TableRow style={{ flexDirection: 'row-reverse' }}>\n        {headRows.map(row => (\n          <TableCell\n            key={row.fid}\n            align=\"right\"\n            padding=\"default\"\n            sortDirection={orderBy === row.fid ? order : false}>\n            <TableSortLabel\n              active={orderBy === row.fid}\n              direction={order}\n              onClick={createSortHandler(row.fid)}>\n              {row.label}\n            </TableSortLabel>\n          </TableCell>\n        ))}\n\n        <TableCell padding=\"checkbox\">\n          {multiSelect ? (\n            <Checkbox\n              style={{ color: '#3F51B5' }}\n              indeterminate={numSelected > 0 && numSelected < rowCount}\n              checked={numSelected > 0 && numSelected === rowCount}\n              onChange={onSelectAllClick}\n            />\n          ) : null}\n        </TableCell>\n      </TableRow>\n    </TableHead>\n  );\n}\n\nconst useCircularIndeterminateStyles = makeStyles(theme => ({\n  progress: {\n    margin: theme.spacing(2)\n  }\n}));\n\nconst CircularIndeterminate = () => {\n  const classes = useCircularIndeterminateStyles();\n\n  return (\n    <div>\n      <CircularProgress size={30} className={classes.progress} style={{ color: '#0089c7' }} />\n    </div>\n  );\n};\n\nEnhancedTableHead.propTypes = {\n  numSelected: PropTypes.number.isRequired,\n  onRequestSort: PropTypes.func.isRequired,\n  onSelectAllClick: PropTypes.func.isRequired,\n  order: PropTypes.string.isRequired,\n  orderBy: PropTypes.string.isRequired,\n  rowCount: PropTypes.number.isRequired,\n  multiSelect: PropTypes.bool\n};\n\nconst useToolbarStyles = makeStyles(theme => ({\n  root: {\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(1)\n  },\n  highlight:\n    theme.palette.type === 'light'\n      ? {\n          color: theme.palette.secondary.main,\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85)\n        }\n      : {\n          color: theme.palette.text.primary,\n          backgroundColor: theme.palette.secondary.dark\n        },\n  spacer: {\n    flex: '1 1 100%'\n  },\n  actions: {\n    color: theme.palette.text.secondary\n  },\n  title: {\n    flex: '0 0 auto',\n    flexDirection: 'row-reverse'\n  }\n}));\n\nconst EnhancedTableToolbar = props => {\n  const classes = useToolbarStyles();\n  const { numSelected, multiSelect, onClickFetchReport, isFetchingReport } = props;\n\n  return (\n    <Toolbar\n      className={clsx(classes.root, {\n        [classes.highlight]: numSelected > 0\n      })}>\n      <div className={classes.title}>\n        {multiSelect && numSelected > 0 ? (\n          <Typography style={{ color: '#3F51B5' }} variant=\"subtitle1\">\n            {`מדריכים בחורים ${numSelected}`}\n          </Typography>\n        ) : (\n          <Typography variant=\"h4\" style={{ color: '#41ad48' }}>\n            {props.tableTitle}\n          </Typography>\n        )}\n      </div>\n      <div className={classes.spacer} />\n      <div className={classes.actions}>\n        {numSelected > 0 ? (\n          isFetchingReport ? (\n            <CircularIndeterminate />\n          ) : (\n            <Button onClick={onClickFetchReport} variant=\"outlined\" className={classes.button}>\n              דו\"ח\n            </Button>\n          )\n        ) : null}\n      </div>\n    </Toolbar>\n  );\n};\n\nEnhancedTableToolbar.propTypes = {\n  numSelected: PropTypes.number.isRequired,\n  tableTitle: PropTypes.string.isRequired\n};\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%'\n  },\n  paper: {\n    width: '100%'\n  },\n  table: {\n    minWidth: 750\n  },\n  tableWrapper: {\n    overflowX: 'auto'\n  }\n}));\nconst EnhancedTable = props => {\n  const {\n    tableTitle,\n    rows,\n    multiSelect,\n    selected,\n    handleClick,\n    handleSelectAll,\n    onClickFetchReport,\n    isFetchingReport\n  } = props;\n  const classes = useStyles();\n  const [order, setOrder] = React.useState('asc');\n  const [orderBy, setOrderBy] = React.useState('lastName');\n  const [page, setPage] = React.useState(0);\n  const [rowsPerPage, setRowsPerPage] = React.useState(5);\n  function handleRequestSort(event, property) {\n    const isDesc = orderBy === property && order === 'desc';\n    setOrder(isDesc ? 'asc' : 'desc');\n    setOrderBy(property);\n  }\n\n  function handleChangePage(event, newPage) {\n    setPage(newPage);\n  }\n\n  function handleChangeRowsPerPage(event) {\n    setRowsPerPage(+event.target.value);\n  }\n\n  const isSelected = name => selected.indexOf(name) !== -1;\n\n  const emptyRows = rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);\n\n  return (\n    <div className={classes.root}>\n      <Paper className={classes.paper}>\n        <EnhancedTableToolbar\n          multiSelect={multiSelect}\n          tableTitle={tableTitle}\n          numSelected={selected.length}\n          onClickFetchReport={onClickFetchReport}\n          isFetchingReport={isFetchingReport}\n        />\n        <div className={classes.tableWrapper}>\n          <Table className={classes.table} aria-labelledby=\"tableTitle\" size=\"medium\">\n            <EnhancedTableHead\n              multiSelect={multiSelect}\n              numSelected={selected.length}\n              order={order}\n              orderBy={orderBy}\n              onSelectAllClick={handleSelectAll}\n              onRequestSort={handleRequestSort}\n              rowCount={rows.length}\n            />\n            <TableBody>\n              {stableSort(rows, getSorting(order, orderBy))\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                .map((row, index) => {\n                  const isItemSelected = isSelected(row.fid);\n                  const labelId = `enhanced-table-checkbox-${index}`;\n\n                  return (\n                    <TableRow\n                      hover\n                      onClick={() => handleClick(row.fid)}\n                      role=\"checkbox\"\n                      aria-checked={isItemSelected}\n                      tabIndex={-1}\n                      key={row.fid}\n                      selected={isItemSelected}>\n                      <TableCell align=\"right\">{row.neighborhood}</TableCell>\n                      <TableCell align=\"right\">{row.city}</TableCell>\n                      <TableCell align=\"right\">{row.gender}</TableCell>\n                      <TableCell align=\"right\">{row.firstName}</TableCell>\n                      <TableCell align=\"right\">{row.lastName}</TableCell>\n                      <TableCell padding=\"checkbox\">\n                        <Checkbox\n                          checked={isItemSelected}\n                          inputProps={{ 'aria-labelledby': labelId }}\n                          style={{ color: '#3F51B5' }}\n                        />\n                      </TableCell>\n                    </TableRow>\n                  );\n                })}\n              {emptyRows > 0 && (\n                <TableRow style={{ height: 49 * emptyRows }}>\n                  <TableCell colSpan={6} />\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </div>\n        <TablePagination\n          rowsPerPageOptions={[5, 10]}\n          component=\"div\"\n          count={rows.length}\n          rowsPerPage={rowsPerPage}\n          page={page}\n          backIconButtonProps={{\n            'aria-label': 'Previous Page'\n          }}\n          nextIconButtonProps={{\n            'aria-label': 'Next Page'\n          }}\n          onChangePage={handleChangePage}\n          onChangeRowsPerPage={handleChangeRowsPerPage}\n        />\n      </Paper>\n    </div>\n  );\n};\n\nexport { EnhancedTable };\n","import React from 'react';\r\nimport { checkIfAllFieldsHaveValue } from '../utils/general-utils';\r\nimport {\r\n  AppBar,\r\n  Toolbar,\r\n  Typography,\r\n  Button,\r\n  CardContent,\r\n  NativeSelect,\r\n  Table,\r\n  TableCell,\r\n  TableBody,\r\n  TableRow\r\n} from '@material-ui/core';\r\nimport { MsgToShow } from './';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\n\r\nconst mandatoryRows = ['firstName', 'lastName', 'gender'];\r\nconst rows = [\r\n  'i',\r\n  'lastName',\r\n  'firstName',\r\n  'groups',\r\n  'phone',\r\n  'gender',\r\n  'schoolGrade',\r\n  'school',\r\n  'address',\r\n  'neighborhood',\r\n  'dob',\r\n  'govID',\r\n  'city',\r\n  'email',\r\n  'shirtSize',\r\n  'friends',\r\n  'socialCircle',\r\n  'youthGroup',\r\n  'interests',\r\n  'specialIssues',\r\n  'prefferedDays',\r\n  'staffMemberAppointed',\r\n  'comments'\r\n];\r\nclass Select extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      lastName: '',\r\n      firstName: '',\r\n      groups: '',\r\n      phone: '',\r\n      gender: '',\r\n      schoolGrade: '',\r\n      school: '',\r\n      address: '',\r\n      neighborhood: '',\r\n      dob: '',\r\n      govID: '',\r\n      city: '',\r\n      email: '',\r\n      shirtSize: '',\r\n      friends: '',\r\n      socialCircle: '',\r\n      youthGroup: '',\r\n      interests: '',\r\n      specialIssues: '',\r\n      prefferedDays: '',\r\n      staffMemberAppointed: '',\r\n      comments: '',\r\n      i: '',\r\n      send: false,\r\n      msgState: { title: '', body: '', visible: false }\r\n    };\r\n  }\r\n\r\n  handleChange = name => event => {\r\n    this.setState({ [name]: event.target.value });\r\n  };\r\n\r\n  getLabel = str => {\r\n    switch (str) {\r\n      case 'i':\r\n        return 'בחר עמודה מתאימה';\r\n      case 'lastName':\r\n        return 'שם משפחה';\r\n      case 'firstName':\r\n        return 'שם פרטי';\r\n      case 'phone':\r\n        return 'נייד';\r\n      case 'groups':\r\n        return 'קבוצות';\r\n      case 'gender':\r\n        return 'מין';\r\n      case 'schoolGrade':\r\n        return 'כיתה';\r\n      case 'school':\r\n        return 'מוסד  לימודים';\r\n      case 'address':\r\n        return 'כתובת';\r\n      case 'neighborhood':\r\n        return 'שכונה';\r\n      case 'dob':\r\n        return 'תאריך לידה';\r\n      case 'govID':\r\n        return 'תעודת זהות';\r\n      case 'city':\r\n        return 'עיר';\r\n      case 'email':\r\n        return 'מייל';\r\n      case 'friends':\r\n        return 'חברים';\r\n      case 'shirtSize':\r\n        return 'מידת חולצה';\r\n      case 'socialCircle':\r\n        return 'מעגל חברתי';\r\n      case 'youthGroup':\r\n        return 'תנועת נוער';\r\n      case 'interests':\r\n        return 'תחומי עניין';\r\n      case 'specialIssues':\r\n        return 'בעיות מיוחדות';\r\n      case 'prefferedDays':\r\n        return 'ימים מועדפים';\r\n      case 'staffMemberAppointed':\r\n        return 'איש צוות מטפל';\r\n      case 'comments':\r\n        return 'הערות';\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  checkDisabled = str => {\r\n    if (str === 'i') {\r\n      return false;\r\n    }\r\n    return Object.values(this.state).includes(str);\r\n  };\r\n\r\n  chosen = (obj, name) => {\r\n    return obj[name] && obj[name] !== 'בחר עמודה מתאימה';\r\n  };\r\n\r\n  handleClickOpen = () => {\r\n    let canSend = checkIfAllFieldsHaveValue(mandatoryRows, this.state, this.chosen);\r\n\r\n    if (canSend === true) {\r\n      const [, ...rest] = rows;\r\n      this.props.onSelectingDone(\r\n        rest\r\n          .filter(row => this.chosen(this.state, row))\r\n          .map(existingName => [existingName, this.state[existingName]])\r\n      );\r\n      this.setState({ send: true });\r\n    }\r\n\r\n    if (!canSend) {\r\n      this.setState({\r\n        msgState: {\r\n          title: 'שגיאה בטעינת הקבוץ',\r\n          body: 'המערכת לא הצליחה לטעון את הנתונים בדוק אם מלאת את כל שדות החובה',\r\n          visible: true\r\n        }\r\n      });\r\n    }\r\n\r\n    if (canSend) {\r\n      this.setState({\r\n        msgState: {\r\n          title: 'טעינת קובץ',\r\n          body: 'הקובץ נטען בהצלחה',\r\n          visible: true\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ send: false });\r\n  };\r\n\r\n  render() {\r\n    const classes = {\r\n      textField: {\r\n        marginLeft: 100,\r\n\r\n        width: 1000\r\n      },\r\n      dense: {\r\n        marginTop: 19\r\n      }\r\n    };\r\n\r\n    return (\r\n      <div>\r\n        <AppBar position=\"static\">\r\n          <Toolbar>\r\n            <Button\r\n              align=\"right\"\r\n              color=\"secondary\"\r\n              style={{ width: 150, height: 50, position: 'relative', float: 'left', margin: 20 }}\r\n              variant=\"contained\"\r\n              className={classes.button}\r\n              onClick={this.handleClickOpen}>\r\n              <ChevronLeftIcon style={{ marginRight: 20 }} />\r\n              בצע התאמה\r\n            </Button>\r\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }} />\r\n            <h2 color=\"inherit\" style={{ flexGrow: 1 }}>\r\n              התאמת עמודות\r\n            </h2>\r\n          </Toolbar>\r\n        </AppBar>\r\n\r\n        <CardContent>\r\n          <Table style={{ width: '100%', marginLeft: 'auto', marginRight: 'auto' }}>\r\n            <TableBody>\r\n              <TableRow style={{ width: 'auto', marginLeft: 'auto', marginRight: 'auto' }}>\r\n                <TableCell component=\"th\" scope=\"row\" />\r\n                <TableCell align=\"center\"> מותאם לעמודה מהאקסל </TableCell>\r\n                <TableCell align=\"center\"> עמודה באתר </TableCell>\r\n              </TableRow>\r\n              {rows.map(row =>\r\n                row !== 'i' ? (\r\n                  <TableRow\r\n                    key={row}\r\n                    style={{ width: '100%', marginLeft: 'auto', marginRight: 'auto' }}>\r\n                    <TableCell component=\"th\" scope=\"row\" />\r\n                    <TableCell align=\"center\">\r\n                      <NativeSelect\r\n                        className={classes.selectEmpty}\r\n                        value={this.state[row]}\r\n                        name={row}\r\n                        onChange={this.handleChange(row)}\r\n                        inputProps={{ 'aria-label': 'age' }}>\r\n                        {this.props.fileRows.map(row => (\r\n                          <option key={row} disabled={this.checkDisabled(row)} value={row}>\r\n                            {row}\r\n                          </option>\r\n                        ))}\r\n                      </NativeSelect>\r\n                    </TableCell>\r\n                    <TableCell align=\"center\">\r\n                      {mandatoryRows.includes(row) ? '* ' + this.getLabel(row) : this.getLabel(row)}\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ) : null\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </CardContent>\r\n        <MsgToShow\r\n          {...this.state.msgState}\r\n          handleClose={() => {\r\n            if (this.state.send) this.props.uploadedFinished(false);\r\n            this.setState({ msgState: { ...this.state.msgState, visible: false } });\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport { Select };\r\n","import React, { useState } from 'react';\nimport ReactDataGrid from 'react-data-grid';\nimport { Toolbar, Data } from 'react-data-grid-addons';\nimport {\n  makeStyles,\n  Button,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  DialogContentText,\n  CircularProgress,\n  MenuItem,\n  TextField,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Typography\n} from '@material-ui/core/';\nimport { MsgToShow } from '.';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport AddIcon from '@material-ui/icons/Add';\nimport SaveIcon from '@material-ui/icons/Save';\nimport { aoaToFile } from '../utils/excell-utils';\nimport green from '@material-ui/core/colors/green';\nimport 'react-responsive-ui/style.css';\nimport PhoneInput from 'react-phone-number-input/react-responsive-ui';\nimport { firestoreModule } from '../Firebase/Firebase';\nimport moment from 'moment';\nimport ReactDOM from 'react-dom';\nimport { Filters, Editors } from 'react-data-grid-addons';\nimport deepcopy from 'deepcopy';\nimport { getUsersPhones } from '../utils/createRowData';\nimport { removeEmptyFields } from '../utils/general-utils';\nimport { addOwners } from '../utils/local-db';\n\nclass phoneEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      phone: props.value\n    };\n  }\n  getValue() {\n    return { phone: this.state.phone };\n  }\n  getInputNode() {\n    return ReactDOM.findDOMNode(this).getElementsByTagName('input')[0];\n  }\n  handleChangePhone = name => value => {\n    this.setState({ ...this.state, [name]: value });\n  };\n  render() {\n    return (\n      <form>\n        <PhoneInput\n          country=\"IL\"\n          placeholder=\"נייד\"\n          value={this.state.phone}\n          onChange={this.handleChangePhone('phone')}\n        />\n      </form>\n    );\n  }\n}\n\nconst formatter = ({ value }) => {\n  return <div style={{ textAlign: 'right' }}>{value}</div>;\n};\n\nconst defaultColumnProperties = {\n  filterable: true,\n  sortable: true,\n  resizable: true,\n  editable: true,\n  formatter: formatter,\n  minWidth: 50\n};\n\nconst { DropDownEditor } = Editors;\nconst { NumericFilter, AutoCompleteFilter } = Filters;\n\nconst genderOptions = [{ id: 'male', value: 'ז' }, { id: 'female', value: 'נ' }];\nconst genderEditor = <DropDownEditor options={genderOptions} />;\n\nconst columns = [\n  {\n    key: 'id',\n    name: 'No.',\n    width: 40,\n    filterRenderer: NumericFilter,\n    editable: false\n  },\n  {\n    key: 'lastName',\n    name: 'שם משפחה',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'firstName',\n    name: 'שם פרטי',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'phone',\n    name: 'נייד',\n    width: 130,\n    editor: phoneEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'gender',\n    name: 'מין',\n    editor: genderEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'address',\n    name: 'כתובת',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'neighborhood',\n    name: 'שכונה',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'govID',\n    name: 'תעודת זהות',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'city',\n    name: 'עיר',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'email',\n    name: 'מייל',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'lastModified',\n    name: 'שינוי אחרון',\n    filterRenderer: AutoCompleteFilter,\n    editable: false,\n    width: 160\n  },\n  {\n    key: 'check',\n    width: 5\n  }\n].map(c => ({ ...defaultColumnProperties, ...c }));\n\nconst genders = [\n  {\n    value: 'ז',\n    label: 'זכר'\n  },\n  {\n    value: 'נ',\n    label: 'נקבה'\n  }\n];\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    textAlign: 'center',\n    alignContent: 'center',\n    border: 3,\n    borderRadius: 3,\n    borderColor: 'black',\n    borderWidth: 3,\n    width: '100%',\n    maxWidth: 300\n  },\n  nested: {\n    paddingLeft: theme.spacing(2),\n    border: 3,\n    borderRadius: 3\n  },\n  actionsContainer: {\n    display: 'flex',\n    flexDirection: 'row-reverse'\n  },\n  actions: {\n    display: 'flex',\n    margin: theme.spacing(1),\n    flexDirection: 'column',\n    padding: 5,\n    marginTop: 20\n  },\n  saveContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    margin: theme.spacing(1),\n    marginRight: 'auto',\n    padding: 5,\n    marginTop: 20,\n    Size: 50\n  },\n  button: {\n    borderRadius: 5,\n    fontFamily: 'Arial',\n    fontSize: 18,\n    padding: 4,\n    margin: theme.spacing(1),\n    alignContent: 'center',\n    textAlign: 'right'\n  },\n  formTitle: {\n    textAlign: 'center',\n    font: 30\n  },\n  formText: {\n    textAlign: 'right'\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    textAlign: 'right',\n    width: 150\n  },\n\n  icon: {\n    margin: theme.spacing(1)\n  },\n  buttonProgress: {\n    color: green[500],\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    marginTop: -12,\n    marginLeft: -12\n  },\n  menu: {\n    width: 150\n  },\n  rowRener: {\n    border: 1,\n    borderRadius: 3\n  }\n}));\n\nconst selectors = Data.Selectors;\n\nconst sortRows = (initialRows, sortColumn, sortDirection) => rows => {\n  const comparer = (a, b) => {\n    if (sortDirection === 'ASC') {\n      return a[sortColumn] > b[sortColumn] ? 1 : -1;\n    } else if (sortDirection === 'DESC') {\n      return a[sortColumn] < b[sortColumn] ? 1 : -1;\n    }\n  };\n  return sortDirection === 'NONE' ? initialRows : [...rows].sort(comparer);\n};\n\nconst handleFilterChange = filter => filters => {\n  const newFilters = { ...filters };\n  if (filter.filterTerm) {\n    newFilters[filter.column.key] = filter;\n  } else {\n    delete newFilters[filter.column.key];\n  }\n  return newFilters;\n};\n\nfunction getValidFilterValues(rows, columnId) {\n  return rows\n    .map(r => r[columnId])\n    .filter((item, i, a) => {\n      return i === a.indexOf(item);\n    });\n}\n\nfunction getRows(rows, filters) {\n  return selectors.getRows({ rows, filters });\n}\n\nconst RowRenderer = ({ row, renderBaseRow, ...props }) => {\n  const rowToRender = {\n    ...row,\n    lastModified: moment(row.lastModified).format('DD/MM/YYYY HH:mm:ss')\n  };\n  const color = props.idx % 2 ? '#eee' : '#555';\n  return (\n    <div style={{ backgroundColor: color }}>{renderBaseRow({ ...props, row: rowToRender })}</div>\n  );\n};\n\nfunction GenericTab({\n  originalRows,\n  setOriginalRows,\n  rows,\n  setMainRows,\n  genericSaveButtonColor,\n  setGenericSaveButtonColor,\n  type,\n  userStatus,\n  role,\n  uid\n}) {\n  const [selectedIndexes, setSelectedIndexes] = useState([]);\n  const [filters, setFilters] = useState({});\n  let [rowsCopy, setRows] = useState(rows);\n  const [loading, setLoading] = useState(false);\n  const [loadingPage, setLoadingPage] = useState(true);\n  const [msgState, setMsgState] = useState({ title: '', body: '', visible: false });\n  const [formState, setFormState] = useState({\n    firstNameErr: false,\n    lastNameErr: false,\n    genderErr: false,\n    phoneErr: false\n  });\n  const [openForm, setOpenForm] = useState(false);\n  let filteredRows = getRows(rowsCopy, filters);\n  const [newRow, setNewRow] = useState({});\n  const [loadingSave, setLoadingSave] = useState(false);\n  const [loadingAdd, setLoadingAdd] = useState(false);\n  const [openDeleteCheck, setOpenDeleteCheck] = useState(false);\n  const [usersPhones, setUsersPhones] = useState([]);\n\n  const fixRowFields = row => {\n    columns.forEach(({ key }) => {\n      if (row.hasOwnProperty(key)) {\n        if (\n          key === 'lastModified' &&\n          row[key] !== undefined &&\n          row[key] !== null &&\n          row[key] !== ''\n        ) {\n          row[key] = row[key] instanceof Date ? row[key] : row[key].toDate();\n        }\n        if (row[key] === null || row[key] === undefined || key === 'dob') {\n          row[key] = '';\n        }\n      } else {\n        row = { ...row, [key]: '' };\n      }\n    });\n    return row;\n  };\n\n  const fixRowsFields = arr => {\n    return arr.map(fixRowFields);\n  };\n\n  function checkIfUserExist(phone) {\n    return usersPhones.includes(phone);\n  }\n\n  function isValidPhone(phone) {\n    if (phone.length === 13) return true;\n    return false;\n  }\n\n  const onGridRowsUpdated = ({ fromRow, toRow, updated }) => {\n    if (updated.phone !== undefined) {\n      if (!isValidPhone(updated.phone)) {\n        setMsgState({\n          title: 'עריכת נייד',\n          body: '!נא להכניס נייד תקין',\n          visible: true\n        });\n        return;\n      }\n      if (checkIfUserExist(updated.phone)) {\n        setMsgState({\n          title: 'עריכת נייד',\n          body: '!הנייד כבר קיים במערכת',\n          visible: true\n        });\n        return;\n      }\n    }\n    setGenericSaveButtonColor('secondary');\n    const newRows = deepcopy(rowsCopy);\n    for (let i = 0; i < newRows.length; i++) {\n      if (i >= fromRow && i <= toRow) {\n        newRows[i] = { ...rowsCopy[i], ...updated };\n        newRows[i].lastModified = updateDate();\n      } else {\n        newRows[i].lastModified = new Date(newRows[i].lastModified);\n      }\n    }\n    setRows(newRows);\n    setMainRows(newRows);\n  };\n\n  const updateDate = () => {\n    return new Date();\n  };\n\n  const updateNums = () => {\n    for (let i = 0; i < rowsCopy.length; i++) {\n      rowsCopy[i].id = i + 1;\n    }\n    setRows(rowsCopy);\n    setMainRows(rowsCopy);\n  };\n\n  const handleChange = name => event => {\n    let fieldName = name + 'Err';\n    setFormState({ ...formState, [fieldName]: false });\n    setNewRow({ ...newRow, [name]: event.target.value });\n  };\n\n  const handleChangePhone = name => value => {\n    setFormState({ ...formState, phoneErr: false });\n    setNewRow({ ...newRow, [name]: value });\n  };\n\n  function handleClickOpenForm() {\n    setNewRow({ id: rowsCopy.length, lastModified: updateDate(), ...newRow });\n    setOpenForm(true);\n  }\n\n  function handleCloseForm() {\n    setOpenForm(false);\n    setNewRow({});\n  }\n\n  function handleOpenCheckDelete() {\n    if (selectedIndexes.length > 0) setOpenDeleteCheck(true);\n  }\n  function handleCloseCheckDelete() {\n    setOpenDeleteCheck(false);\n  }\n\n  const deleteRow = () => {\n    if (selectedIndexes.length === 0) return;\n    if (!loading) {\n      setLoading(true);\n      const fids = [];\n      selectedIndexes.forEach(idx => fids.push(rowsCopy[idx].fid));\n      fids.forEach(id => firestoreModule.deleteUser(id));\n      let newArr = rowsCopy.filter((row, i) => !selectedIndexes.includes(i));\n      while (selectedIndexes.length !== 0) {\n        selectedIndexes.shift();\n      }\n      rowsCopy = newArr;\n      setRows(rowsCopy);\n      setMainRows(rowsCopy);\n      setLoading(false);\n      handleCloseCheckDelete();\n      if (type === 'tutors')\n        setMsgState({\n          title: 'מחיקת מדריכם',\n          body: '!כל המדריכים שנבחרו נמחקו בהצלחה',\n          visible: true\n        });\n      else if (type === 'coordinators')\n        setMsgState({\n          title: 'מחיקת רכזים',\n          body: '!כל הרכזים שנבחרו נמחקו בהצלחה',\n          visible: true\n        });\n      else if (type === 'departmentManagers')\n        setMsgState({\n          title: 'מחיקת מנהלי מחלקות',\n          body: '!כל המנהלים שנבחרו נמחקו בהצלחה',\n          visible: true\n        });\n      setGenericSaveButtonColor('secondary');\n      updateNums();\n    }\n  };\n\n  const removeUnnecessaryFields = row => {\n    delete row.check;\n    delete row.id;\n    delete row.fid;\n  };\n\n  function formValidation() {\n    if (newRow.firstName === '' || !newRow.hasOwnProperty('firstName')) {\n      setFormState({ firstNameErr: true });\n      return;\n    } else {\n      setFormState({ firstNameErr: false });\n    }\n    if (newRow.lastName === '' || !newRow.hasOwnProperty('lastName')) {\n      setFormState({ lastNameErr: true });\n      return;\n    } else {\n      setFormState({ lastNameErr: false });\n    }\n    if (newRow.gender === '' || !newRow.hasOwnProperty('gender')) {\n      setFormState({ genderErr: true });\n      return;\n    } else {\n      setFormState({ genderErr: false });\n    }\n    if (newRow.phone === '' || !newRow.hasOwnProperty('phone') || newRow.phone === undefined) {\n      setFormState({ phoneErr: true });\n      return;\n    } else {\n      setFormState({ phoneErr: false });\n    }\n\n    if (newRow.phone && !isValidPhone(newRow.phone)) {\n      setMsgState({\n        title: 'הוספת חניך',\n        body: '!נא להכניס נייד תקין',\n        visible: true\n      });\n      return;\n    }\n    if (checkIfUserExist(newRow.phone)) {\n      if (type === 'tutors')\n        setMsgState({\n          title: 'הוספת מדריך',\n          body: '!המדריך כבר קיים במערכת',\n          visible: true\n        });\n      else if (type === 'coordinators')\n        setMsgState({\n          title: 'הוספת רכז',\n          body: '!הרכז כבר קיים במערכת',\n          visible: true\n        });\n      else if (type === 'departmentManagers')\n        setMsgState({\n          title: 'הוספת מנהל מחלקה',\n          body: '!המנהל כבר קיים במערכת',\n          visible: true\n        });\n      return;\n    }\n    addRow();\n  }\n\n  checkIfUserExist(newRow.phone);\n\n  const addRow = () => {\n    setLoadingAdd(true);\n    handleCloseForm();\n    let fixedRow = fixRowFields(newRow);\n    removeUnnecessaryFields(fixedRow);\n    fixedRow = addOwners(role, uid, userStatus.owners, type, fixedRow);\n    fixedRow = removeEmptyFields(fixedRow);\n    firestoreModule\n      .getUsers()\n      .add(fixedRow)\n      .then(ref => {\n        fixedRow = { ...fixedRow, fid: ref.id };\n        fixedRow = fixRowFields(fixedRow);\n        fixedRow = addOwners(role, uid, userStatus.owners, type, fixedRow);\n\n        rowsCopy.unshift(fixedRow);\n\n        updateNums();\n        setRows(rowsCopy);\n        setMainRows(rowsCopy);\n        if (type === 'tutors')\n          setMsgState({\n            title: 'הוספת מדריך',\n            body: '!המדריך הוסף בהצלחה',\n            visible: true\n          });\n        else if (type === 'coordinators')\n          setMsgState({\n            title: 'הוספת רכז',\n            body: '!הרכז הוסף בהצלחה',\n            visible: true\n          });\n        else if (type === 'departmentManagers')\n          setMsgState({\n            title: 'הוספת מנהל מחלקה',\n            body: '!המנהל הוסף בהצלחה',\n            visible: true\n          });\n        setGenericSaveButtonColor('secondary');\n        setLoadingAdd(false);\n      })\n      .catch(function (error) {\n        console.log('Error adding', error);\n      });\n  };\n\n  const classes = useStyles();\n\n  const onRowsSelected = rows => {\n    setSelectedIndexes(selectedIndexes.concat(rows.map(r => r.rowIdx)));\n  };\n\n  const onRowsDeselected = rows => {\n    let rowIndexes = rows.map(r => r.rowIdx);\n    const newSelectedIndexes = selectedIndexes.filter(i => rowIndexes.indexOf(i) === -1);\n    setSelectedIndexes(newSelectedIndexes);\n  };\n\n  const getAppropriateSelect = () => {\n    if (type === 'tutors') return selectedIndexes.length === 1 ? 'מדריך בחור' : 'מדריכים בחורים';\n    if (type === 'coordinators') return selectedIndexes.length === 1 ? 'רכז בחור' : 'רכזים בחורים';\n    if (type === 'departmentManagers')\n      return selectedIndexes.length === 1 ? 'מנהל בחור' : 'מנהלים בחורים';\n  };\n  const rowText = getAppropriateSelect();\n\n  const columnsToShow = [...columns];\n\n  const rowToArr = row => columns.map(r => row[r.key]);\n\n  const exportToExcel = () => {\n    const columnNames = columns.map(r => r.name);\n    const aoa = [columnNames].concat(rowsCopy.map(rowToArr));\n    if (type === 'tutors') aoaToFile({ fileName: 'רשימת מדריכים', aoa });\n    if (type === 'coordinators') aoaToFile({ fileName: 'רשימת רכזים', aoa });\n    if (type === 'departmentManagers') aoaToFile({ fileName: 'רשימת מנהלי מחלקות', aoa });\n  };\n\n  const firstTimeLoading = () => {\n    updateNums();\n    getUsersPhones(setUsersPhones);\n    let newRows = fixRowsFields(rowsCopy);\n    setRows([...newRows]);\n    setMainRows([...rowsCopy]);\n    setLoadingPage(false);\n  };\n  if (loadingPage) firstTimeLoading();\n\n  const deleteUnnecessaryRow = () => {\n    let fids = rowsCopy.map(row => row.fid);\n    originalRows = originalRows.filter(row => fids.includes(row.fid));\n    setOriginalRows([...originalRows]);\n  };\n\n  const getRowsToUpdate = () => {\n    let ids = [];\n    let rows = [];\n    rowsCopy.map(row => ids.push({ id: row.id - 1, fid: row.fid }));\n    for (let i = 0; i < originalRows.length; i++) {\n      for (let j = 0; j < ids.length; j++) {\n        if (originalRows[i].fid === ids[j].fid) {\n          if (rowsCopy[ids[j].id] !== undefined) {\n            if (originalRows[i].lastModified instanceof Date) {\n              if (\n                originalRows[i].lastModified.getTime() !==\n                new Date(rowsCopy[ids[j].id].lastModified).getTime()\n              )\n                rows.push(rowsCopy[ids[j].id]);\n            } else {\n              if (\n                originalRows[i].lastModified.toDate().getTime() !==\n                new Date(rowsCopy[ids[j].id].lastModified).getTime()\n              )\n                rows.push(rowsCopy[ids[j].id]);\n            }\n          }\n        }\n      }\n    }\n    return rows;\n  };\n\n  const makeUpdate = arr => {\n    arr.forEach(row => {\n      let temp = { ...row };\n      removeUnnecessaryFields(temp);\n      temp = removeEmptyFields(temp);\n      firestoreModule.getSpecificUser(row.fid).set(temp);\n    });\n  };\n  const saveUpdates = () => {\n    setLoadingSave(true);\n    if (originalRows.length !== rowsCopy.length) deleteUnnecessaryRow();\n    let arr = getRowsToUpdate();\n    if (arr.length > 0) makeUpdate(arr);\n    let newRows = fixRowsFields(rowsCopy);\n    setRows(newRows);\n    setOriginalRows(newRows);\n    setMainRows(newRows);\n    updateNums();\n    setLoadingSave(false);\n    setGenericSaveButtonColor('default');\n    setMsgState({\n      title: 'שמירת שינויים',\n      body: 'כל השינויים נשמרו בהצלחה',\n      visible: true\n    });\n  };\n\n  return (\n    <div>\n      <div className={classes.actionsContainer}>\n        <div className={classes.actions}>\n          <Button\n            style={{ color: '#0089c6', border: 3, borderStyle: 'solid' }}\n            variant=\"outlined\"\n            disabled={loadingAdd}\n            className={classes.button}\n            onClick={() => handleClickOpenForm()}\n            size=\"large\">\n            {type === 'tutors' && 'הוסף מדריך'}\n            {type === 'coordinators' && 'הוסף רכז שכונה'}\n            {type === 'departmentManagers' && 'הוסף מנהל מחלקה'}\n            <AddIcon />\n            {loadingAdd && <CircularProgress size={24} className={classes.buttonProgress} />}\n          </Button>\n          <MsgToShow\n            {...msgState}\n            handleClose={() => setMsgState({ ...msgState, visible: false })}\n          />\n          <Dialog\n            disableBackdropClick\n            disableEscapeKeyDown\n            open={openForm}\n            onClose={handleCloseForm}\n            aria-labelledby=\"form-dialog-title\">\n            <form validate=\"true\" autoComplete=\"on\">\n              <DialogTitle id=\"form-dialog-title\" className={classes.formTitle}>\n                {type === 'tutors' && 'הוספת מדריך'}\n                {type === 'coordinators' && 'הוספת רכז שכונה'}\n                {type === 'departmentManagers' && 'הוספת מנהל מחלקה'}\n              </DialogTitle>\n              <DialogContent>\n                <DialogContentText className={classes.formText}>\n                  ** נא למלא את כל השדות **\n                </DialogContentText>\n                <TextField\n                  required\n                  autoFocus\n                  error={formState.firstNameErr}\n                  variant=\"outlined\"\n                  margin=\"dense\"\n                  id=\"firstName\"\n                  className={classes.textField}\n                  placeholder=\"דוד\"\n                  label=\"שם פרטי\"\n                  type=\"name\"\n                  onChange={handleChange('firstName')}\n                />\n                <TextField\n                  required\n                  variant=\"outlined\"\n                  error={formState.lastNameErr}\n                  margin=\"dense\"\n                  id=\"lastName\"\n                  className={classes.textField}\n                  placeholder=\"כהן\"\n                  label=\"שם המשפחה\"\n                  type=\"name\"\n                  onChange={handleChange('lastName')}\n                />\n                <TextField\n                  required\n                  select\n                  id=\"gender\"\n                  error={formState.genderErr}\n                  variant=\"outlined\"\n                  margin=\"dens\"\n                  label=\"מין\"\n                  className={classes.textField}\n                  onChange={handleChange('gender')}\n                  value={newRow.gender}\n                  SelectProps={{\n                    MenuProps: {\n                      className: classes.menu\n                    }\n                  }}>\n                  {genders.map(option => (\n                    <MenuItem key={option.value} value={option.value}>\n                      {option.label}\n                    </MenuItem>\n                  ))}\n                </TextField>\n                <PhoneInput\n                  required\n                  country=\"IL\"\n                  error={formState.phoneErr}\n                  label=\"מס' טלפון\"\n                  placeholder=\"נייד\"\n                  className={classes.textField}\n                  value={newRow.phone}\n                  onChange={handleChangePhone('phone')}\n                />\n              </DialogContent>\n              <DialogActions>\n                <Button onClick={handleCloseForm} color=\"secondary\" size=\"large\">\n                  בטל\n                </Button>\n                <Button onClick={() => formValidation()} color=\"primary\" size=\"large\">\n                  אשר\n                </Button>\n              </DialogActions>\n            </form>\n          </Dialog>\n        </div>\n\n        <div className={classes.actions}>\n          <Button\n            style={{ color: '#0089c6', border: 3, borderStyle: 'solid' }}\n            variant=\"outlined\"\n            size=\"large\"\n            className={classes.button}\n            onClick={() => exportToExcel()}>\n            ייצא לאקסל\n            <SaveIcon />\n          </Button>\n        </div>\n\n        <div className={classes.saveContainer}>\n          <Button\n            style={{ border: 3, borderStyle: 'solid' }}\n            variant=\"outlined\"\n            size=\"large\"\n            color={genericSaveButtonColor}\n            className={classes.button}\n            onClick={() => (genericSaveButtonColor === 'secondary' ? saveUpdates() : {})}\n            disabled={loadingSave}>\n            שמור שינויים\n            <SaveIcon />\n            {loadingSave && <CircularProgress size={24} className={classes.buttonProgress} />}\n          </Button>\n        </div>\n      </div>\n\n      <ReactDataGrid\n        rowKey=\"id\"\n        columns={columnsToShow.reverse()}\n        rowGetter={i => filteredRows[i]}\n        rowsCount={filteredRows.length}\n        minHeight={350}\n        toolbar={<Toolbar enableFilter={true} />}\n        onAddFilter={filter => setFilters(handleFilterChange(filter))}\n        onClearFilters={() => setFilters({})}\n        getValidFilterValues={columnKey => getValidFilterValues(rowsCopy, columnKey)}\n        onGridSort={(sortColumn, sortDirection) =>\n          setRows(sortRows(rowsCopy, sortColumn, sortDirection))\n        }\n        onGridRowsUpdated={onGridRowsUpdated}\n        rowRenderer={RowRenderer}\n        enableCellSelect={true}\n        rowSelection={{\n          showCheckbox: true,\n          enableShiftSelect: true,\n          onRowsSelected: onRowsSelected,\n          onRowsDeselected: onRowsDeselected,\n          selectBy: {\n            indexes: selectedIndexes\n          }\n        }}\n      />\n\n      {selectedIndexes.length !== 0 ? (\n        <div className={classes.actionsContainer}>\n          <List\n            component=\"nav\"\n            className={classes.root}\n            style={{ maxWidth: 250, border: 3, borderColor: 'black' }}>\n            <ListItem button onClick={handleOpenCheckDelete} disabled={loading}>\n              <ListItemIcon>\n                <DeleteIcon />\n              </ListItemIcon>\n              {type === 'tutors' && (\n                <ListItemText primary=\"מחק מדריכים שנבחרו\" style={{ textAlign: 'right' }} />\n              )}\n              {type === 'coordinators' && (\n                <ListItemText primary=\"מחק רכזים שנבחרו\" style={{ textAlign: 'right' }} />\n              )}\n              {type === 'departmentManagers' && (\n                <ListItemText primary=\"מחק מנהלים שנבחרו\" style={{ textAlign: 'right' }} />\n              )}\n\n              {loading && <CircularProgress size={24} className={classes.buttonProgress} />}\n            </ListItem>\n\n            <Dialog\n              disableBackdropClick\n              disableEscapeKeyDown\n              open={openDeleteCheck}\n              onClose={handleCloseCheckDelete}>\n              <DialogTitle className={classes.formTitle}>\n                {type === 'tutors' && 'מחיקת מדריכים'}\n                {type === 'coordinators' && 'מחיקת רכזים'}\n                {type === 'departmentManagers' && 'מחיקת מנהלים'}\n              </DialogTitle>\n              <DialogContent>\n                <DialogContentText className={classes.formText}>\n                  {type === 'tutors' && 'אתה עומד למחוק את כל המדריכים שנבחרו'}\n                  {type === 'coordinators' && 'אתה עומד למחוק את כל הרכזים שנבחרו'}\n                  {type === 'departmentManagers' && 'אתה עומד למחוק את כל המנהלים שנבחרו'}\n                </DialogContentText>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  onClick={handleCloseCheckDelete}\n                  color=\"primary\"\n                  className={classes.button}\n                  size=\"large\">\n                  בטל\n                </Button>\n                <Button\n                  onClick={deleteRow}\n                  color=\"secondary\"\n                  className={classes.button}\n                  size=\"large\">\n                  אשר\n                </Button>\n              </DialogActions>\n            </Dialog>\n          </List>\n\n          <List className={classes.saveContainer}>\n            <Typography style={{ color: '#3F51B5', font: 30 }} variant=\"subtitle1\">\n              {selectedIndexes.length} {rowText}\n            </Typography>\n          </List>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nexport { GenericTab };\n","import React, { Component } from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { entriesToObj, checkIfAllFieldsHaveValue } from './general-utils'\r\nimport { Dropzone, MsgToShow, Select } from '../components';\r\n\r\nconst mandatoryRows = ['firstName', 'lastName', 'gender'];\r\nconst INIT_STATE = {\r\n    aoo: [],\r\n    selecting: false,\r\n    uploading: false,\r\n    uploadProgress: {},\r\n    successfullUploaded: false,\r\n    errorUploading: false\r\n}\r\nclass Upload extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = INIT_STATE;\r\n    }\r\n\r\n    aoaToAoo(aoa) {\r\n        const [columnsNames, ...data] = aoa;\r\n        return data.map((row) => entriesToObj(row.map((cellVal, idx) => [columnsNames[idx], cellVal])))\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div style={{ width: '1000' }}>\r\n                {this.state.selecting ?\r\n                    <Select\r\n                        uploadedFinished={(val) => this.setState({ selecting: val })}\r\n                        onSelectingDone={fileRowsToTableRows => {\r\n                            const aoo = this.state.aoo.map(obj =>\r\n                                entriesToObj(fileRowsToTableRows.map(([tableName, fileName]) =>\r\n                                    [tableName, obj[fileName]])));\r\n                            if (aoo.every(obj => checkIfAllFieldsHaveValue(mandatoryRows, obj))) {\r\n                                this.props.onNewFile(aoo);\r\n                            } else {\r\n                                this.setState({ ...INIT_STATE, errorUploading: true })\r\n                            }\r\n                        }}\r\n                        fileRows={Object.keys(this.state.aoo[0])}\r\n                    /> :\r\n                    <>\r\n                        <Dropzone onGetFile={aoa => this.setState({ aoo: this.aoaToAoo(aoa), selecting: aoa.length > 0, successfullUploaded: aoa.length > 0 })} />\r\n                        <Typography align='center' style={{ fontSize: 40, color: '#41ad48' }}>\r\n                            גרור / לחץ לבחירת קובץ\r\n                        </Typography>\r\n                    </>\r\n                }\r\n                <MsgToShow\r\n                    title=\"שגיאה בטעינת הקבוץ\"\r\n                    body=\"המערכת לא הצליחה לטעון את הנתונים בדוק אם מלאת את כל שדות החובה\"\r\n                    visible={this.state.errorUploading}\r\n                    handleClose={() => this.setState({ errorUploading: false })}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Upload;\r\n","import React, { useState } from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { EnhancedTable } from '../components';\r\nimport { Box, Button, makeStyles } from '@material-ui/core';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport green from '@material-ui/core/colors/green';\r\nimport MonthPickerInput from 'react-month-picker-input';\r\nimport { firestoreModule } from '../Firebase/Firebase';\r\nimport { zip } from '../utils/general-utils';\r\nimport { toMoment } from '../utils/date-utils';\r\nimport { totalHoursWorked } from '../utils/local-db';\r\nimport { aoaToFile } from '../utils/excell-utils';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\n\r\nrequire('react-month-picker-input/dist/react-month-picker-input.css');\r\n\r\nconst orderAndLabelsOfStatsInReport = [\r\n  { name: 'totalHoursWorked', label: 'כמה שעות עבדת החודש?' },\r\n  { name: 'studentsInYourCare', label: 'כמה בני נוער באחריותך?' },\r\n  { name: 'studentsDiscussedWith', label: 'עם כמה בני נוער ניהלת שיחה ולו פעם אחת?' },\r\n  {\r\n    name: 'studentsWhoSharedProblems',\r\n    label: 'עם כמה בני נוער יש לך קשר משמעותי ? (לדוגמה משתף אותך בקשיים ?)'\r\n  },\r\n  {\r\n    name: 'studentsWhoAttendedContentGroupActivity',\r\n    label: 'כמה בני נוער נמצאים בפעילות תהליכי תוכן שאתה מוביל? (גם דברים שלא אתה ישירות מעביר)'\r\n  },\r\n  {\r\n    name: 'groupActivitiesWithAdmirablePerson',\r\n    label: 'כמה מפגשים עם דמויות להזדהות ארגנת לחברה?  (לא חשוב לכמה חברה)'\r\n  },\r\n  {\r\n    name: 'regiousGroupActivities',\r\n    label:\r\n      \"כמה חוויות שלערכיות / משמעותיות /קודש ארגנת לקבוצות קטנות ובינוניות (קבלת שבת, עונג שבת, מלווה מלכה , סיור, טיול, שיעור תורה חד פעמי, על האש - פויקה , מפגש ביתי לשיח חופשי, התנדבותו כדו')\"\r\n  }\r\n];\r\n\r\nconst ReportsTabScene = props => {\r\n  const rows = props.tutor ? null : props.tutors.filter(({ fid }) => fid);\r\n  const [reportType, setReportType] = useState('monthlyReport');\r\n  const [selectedDate, setSelectedDate] = useState({\r\n    selectedMonth: new Date().getMonth(),\r\n    selectedYear: new Date().getFullYear()\r\n  });\r\n  const [selected, setSelected] = useState([]);\r\n\r\n  const [isFetchingReport, setIsFetchingReport] = useState(false);\r\n\r\n  const classes = useStyles();\r\n\r\n  const fetchReports = () => {\r\n    setIsFetchingReport(true);\r\n    let month = null;\r\n    if (reportType === 'monthlyReport')\r\n      month = new Date(selectedDate.selectedYear, selectedDate.selectedMonth);\r\n\r\n    firestoreModule\r\n      .getAttendance(props.tutor ? [props.tutor.fid] : selected, month)\r\n      .then(results => {\r\n        if (results.length === 0) {\r\n          throw new Error('no results!');\r\n        }\r\n        const aoaOfUIDs = results.map(resultsOfUID => {\r\n          const objOfMonthsToShifts = _.groupBy(resultsOfUID, ({ startTime }) =>\r\n            toMoment(startTime).format('YYYY-MM')\r\n          );\r\n          const sortedMonths = _.sortBy(Object.entries(objOfMonthsToShifts), ([month]) =>\r\n            moment(month)\r\n          ).map(([month]) => month);\r\n\r\n          const entries = Object.entries(objOfMonthsToShifts)\r\n            .map(([month, shifts]) => {\r\n              const totalHoursWorkedInMonth = totalHoursWorked(shifts);\r\n              const fixedShiftDates = shifts.map(\r\n                ({ activities, startTime, endTime }) => ({\r\n                  activities,\r\n                  startTime: toMoment(startTime),\r\n                  endTime: toMoment(endTime)\r\n                })\r\n              );\r\n              const sortedShifts = fixedShiftDates.sort((shiftA, shiftB) =>\r\n                shiftA.startTime > shiftB.startTime ? 1 : -1\r\n              );\r\n              const sortedShiftsWithGroupActivities = sortedShifts.filter(\r\n                ({ activities }) => _.some(activities, ['type', 'פעילות קבוצתית'])\r\n              );\r\n              const sortedShiftsWithDiscussion = sortedShifts.filter(({ activities }) =>\r\n                _.some(activities, ['type', 'שיחה אישית'])\r\n              );\r\n              const discussionExists = sortedShiftsWithDiscussion.length !== 0;\r\n\r\n              const groupActivitiesExist = sortedShiftsWithGroupActivities.length !== 0;\r\n\r\n              let studentsInYourCare;\r\n              let studentsWhoAttendedContentGroupActivity;\r\n              let groupActivitiesWithAdmirablePerson;\r\n              let regiousGroupActivities;\r\n              if (groupActivitiesExist) {\r\n                const lastShiftWithGroupActivity =\r\n                  sortedShiftsWithGroupActivities[\r\n                  sortedShiftsWithGroupActivities.length - 1\r\n                  ];\r\n                studentsInYourCare = _.union(\r\n                  ..._.find(lastShiftWithGroupActivity.activities, [\r\n                    'type',\r\n                    'פעילות קבוצתית'\r\n                  ]).groups.map(({ participants }) => participants.map(({ uid }) => uid))\r\n                ).length;\r\n                studentsWhoAttendedContentGroupActivity = _.union(\r\n                  _.flatMapDeep(\r\n                    sortedShiftsWithGroupActivities.map(({ activities }) =>\r\n                      activities\r\n                        .filter(({ subtype }) => subtype === 'תהליך תוכן')\r\n                        .map(({ groups }) =>\r\n                          groups\r\n                            .filter(({ attended }) => attended)\r\n                            .map(({ participants }) =>\r\n                              participants\r\n                                .filter(({ attended }) => attended)\r\n                                .map(({ uid }) => uid)\r\n                            )\r\n                        )\r\n                    )\r\n                  )\r\n                ).length;\r\n              }\r\n              groupActivitiesWithAdmirablePerson = _.sum(\r\n                sortedShiftsWithGroupActivities.map(\r\n                  ({ activities }) =>\r\n                    activities.filter(({ subtype }) => subtype === 'מפגש עם דמות להזדהות')\r\n                      .length\r\n                )\r\n              );\r\n              regiousGroupActivities = _.sum(\r\n                sortedShiftsWithGroupActivities.map(\r\n                  ({ activities }) =>\r\n                    activities.filter(\r\n                      ({ subtype }) => subtype === ' חוויה ערכית / משמעותית / קודש'\r\n                    ).length\r\n                )\r\n              );\r\n              let studentsDiscussedWith;\r\n              let studentsWhoSharedProblems;\r\n              if (discussionExists) {\r\n                const discussionActivities = _.union(\r\n                  ...sortedShiftsWithDiscussion.map(({ activities }) =>\r\n                    activities.filter(({ type }) => type === 'שיחה אישית')\r\n                  )\r\n                );\r\n                studentsDiscussedWith = _.union(\r\n                  discussionActivities.map(({ student }) => student.uid)\r\n                ).length;\r\n                studentsWhoSharedProblems = _.union(\r\n                  discussionActivities\r\n                    .filter(({ subtype }) => subtype === 'קושי/בעיה')\r\n                    .map(({ student }) => student.uid)\r\n                ).length;\r\n              }\r\n              return [\r\n                month,\r\n                {\r\n                  totalHoursWorked: _.ceil(totalHoursWorkedInMonth, 1),\r\n                  studentsInYourCare: groupActivitiesExist\r\n                    ? studentsInYourCare\r\n                    : undefined,\r\n                  studentsDiscussedWith: discussionExists\r\n                    ? studentsDiscussedWith\r\n                    : undefined,\r\n                  studentsWhoSharedProblems: discussionExists\r\n                    ? studentsWhoSharedProblems\r\n                    : undefined,\r\n                  studentsWhoAttendedContentGroupActivity: groupActivitiesExist\r\n                    ? studentsWhoAttendedContentGroupActivity\r\n                    : undefined,\r\n                  groupActivitiesWithAdmirablePerson: groupActivitiesExist\r\n                    ? groupActivitiesWithAdmirablePerson\r\n                    : undefined,\r\n                  regiousGroupActivities: groupActivitiesExist\r\n                    ? regiousGroupActivities\r\n                    : undefined\r\n                }\r\n              ];\r\n            })\r\n            .map(([month, shifts]) => _.mapValues(shifts, val => ({ [month]: val })));\r\n          _.merge(...entries);\r\n          return [[undefined].concat(sortedMonths)].concat(\r\n            orderAndLabelsOfStatsInReport.map(({ name, label }) =>\r\n              [label].concat(sortedMonths.map(month => entries[0][name][month]))\r\n            )\r\n          );\r\n        });\r\n        if (reportType !== 'monthlyReport') {\r\n          return aoaOfUIDs[0];\r\n        } else {\r\n          return zip(selected, aoaOfUIDs).reduce(\r\n            (accArr, [currUID, currArr]) =>\r\n              accArr.map((row, i) => {\r\n                if (i === 0) {\r\n                  const tutor = _.find(props.tutors, ['fid', currUID]);\r\n                  return row.concat(tutor.firstName + ' ' + tutor.lastName);\r\n                } else if (currArr[i].length !== 1)\r\n                  return row.concat(currArr[i][currArr[i].length - 1]);\r\n                else return row.concat([undefined]);\r\n              }),\r\n            [[undefined]].concat(\r\n              orderAndLabelsOfStatsInReport.map(({ label }) => [label])\r\n            )\r\n          );\r\n        }\r\n      })\r\n      .then(aoa => {\r\n        setIsFetchingReport(false);\r\n        if (reportType !== 'monthlyReport') {\r\n          aoaToFile({ fileName: 'דו״ח מדריך', aoa });\r\n        } else {\r\n          aoaToFile({ fileName: 'דו״ח חודש ' + moment(month).format('MM-YYYY'), aoa });\r\n        }\r\n      })\r\n      .catch(error => {\r\n        setIsFetchingReport(false);\r\n      });\r\n  }\r\n  return (\r\n    <div style={{ padding: 50 }}>\r\n      {props.tutor ?\r\n        <Box display=\"flex\" flexDirection=\"row-reverse\">\r\n          <Button\r\n            style={{ color: '#0089c6', border: 3, borderStyle: 'solid' }}\r\n            variant=\"outlined\"\r\n            size=\"large\"\r\n            className={classes.button}\r\n            onClick={fetchReports}>\r\n            ייצא דו״ח עצמי\r\n            <SaveIcon />\r\n          </Button>\r\n        </Box>\r\n        :\r\n        <Box display=\"flex\" flexDirection=\"row-reverse\">\r\n\r\n          <Box flex=\"1\" flexDirection=\"column\">\r\n            <Box style={{ textAlign: 'right', marginBottom: 10 }}>\r\n              <Typography\r\n                variant=\"h4\"\r\n                style={{ color: '#41ad48', fontFamily: 'Alef', fontWeight: 'bold' }}>\r\n                בחירת סוג דו״ח\r\n            </Typography>\r\n            </Box>\r\n            <Box style={{ textAlign: 'right', marginBottom: 30 }}>\r\n              <FormControl component=\"fieldset\">\r\n                <RadioGroup\r\n                  aria-label=\"gender\"\r\n                  name=\"gender2\"\r\n                  value={reportType}\r\n                  onChange={event => {\r\n                    setReportType(event.target.value);\r\n                    setSelected([]);\r\n                  }}>\r\n                  <FormControlLabel\r\n                    value=\"monthlyReport\"\r\n                    control={<Radio color=\"primary\" />}\r\n                    label={'דו\"ח מדריכים לפי חודש'}\r\n                    labelPlacement=\"start\"\r\n                  />\r\n                  <FormControlLabel\r\n                    value=\"specificTutorReport\"\r\n                    control={<Radio color=\"primary\" />}\r\n                    label={'דו\"ח מדריך ספציפי'}\r\n                    labelPlacement=\"start\"\r\n                  />\r\n                </RadioGroup>\r\n              </FormControl>\r\n            </Box>\r\n            {reportType === 'monthlyReport' ? (\r\n              <Box style={{ textAlign: 'right' }}>\r\n                <Typography\r\n                  variant=\"h4\"\r\n                  style={{\r\n                    color: '#41ad48',\r\n                    marginBottom: 10,\r\n                    fontFamily: 'Alef',\r\n                    fontWeight: 'bold'\r\n                  }}>\r\n                  בחירת חודש\r\n              </Typography>\r\n                <MonthPickerInput\r\n                  fontSize=\"50\"\r\n                  style={{ padding: 50 }}\r\n                  lang=\"he\"\r\n                  i18n={{\r\n                    monthFormat: 'long',\r\n                    dateFormat: { he: 'MM/YYYY' },\r\n                    monthNames: {\r\n                      he: [\r\n                        'ינו',\r\n                        'פבר',\r\n                        'מרץ',\r\n                        'אפר',\r\n                        'מאי',\r\n                        'יונ',\r\n                        'יול',\r\n                        'אוג',\r\n                        'ספט',\r\n                        'אוק',\r\n                        'נוב',\r\n                        'דצמ'\r\n                      ]\r\n                    }\r\n                  }}\r\n                  year={selectedDate.selectedYear}\r\n                  month={selectedDate.selectedMonth}\r\n                  onChange={(maskedValue, selectedYear, selectedMonth) =>\r\n                    setSelectedDate({ selectedMonth, selectedYear })\r\n                  }\r\n                />\r\n              </Box>\r\n            ) : null}\r\n          </Box>\r\n          <Box flex=\"2\" flexDirection=\"column\">\r\n            <EnhancedTable\r\n              selected={selected}\r\n              handleClick={fid => {\r\n                const selectedIndex = selected.indexOf(fid);\r\n                if (reportType === 'monthlyReport') {\r\n                  let newSelected = [];\r\n                  if (selectedIndex === -1) {\r\n                    newSelected = newSelected.concat(selected, fid);\r\n                  } else if (selectedIndex === 0) {\r\n                    newSelected = newSelected.concat(selected.slice(1));\r\n                  } else if (selectedIndex === selected.length - 1) {\r\n                    newSelected = newSelected.concat(selected.slice(0, -1));\r\n                  } else if (selectedIndex > 0) {\r\n                    newSelected = newSelected.concat(\r\n                      selected.slice(0, selectedIndex),\r\n                      selected.slice(selectedIndex + 1)\r\n                    );\r\n                  }\r\n                  setSelected(newSelected);\r\n                } else {\r\n                  if (selectedIndex === -1) setSelected([fid]);\r\n                }\r\n              }}\r\n              handleSelectAll={event => {\r\n                if (event.target.checked) {\r\n                  setSelected(rows.map(n => n.fid));\r\n                } else {\r\n                  setSelected([]);\r\n                }\r\n              }}\r\n              multiSelect={reportType === 'monthlyReport'}\r\n              tableTitle={reportType === 'monthlyReport' ? 'בחירת מדריכים' : 'בחירת מדריך'}\r\n              rows={rows}\r\n              isFetchingReport={isFetchingReport}\r\n              onClickFetchReport={fetchReports}\r\n            />\r\n          </Box>\r\n        </Box>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    textAlign: 'center',\r\n    alignContent: 'center',\r\n    border: 3,\r\n    borderRadius: 3,\r\n    borderColor: 'black',\r\n    borderWidth: 3,\r\n    width: '100%',\r\n    maxWidth: 300\r\n  },\r\n  nested: {\r\n    paddingLeft: theme.spacing(2),\r\n    border: 3,\r\n    borderRadius: 3\r\n  },\r\n  actionsContainer: {\r\n    display: 'flex',\r\n    flexDirection: 'row-reverse'\r\n  },\r\n  actions: {\r\n    display: 'flex',\r\n    margin: theme.spacing(1),\r\n    flexDirection: 'column',\r\n    padding: 5,\r\n    marginTop: 20\r\n  },\r\n  saveContainer: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    margin: theme.spacing(1),\r\n    marginRight: 'auto',\r\n    padding: 5,\r\n    marginTop: 20,\r\n    Size: 50\r\n  },\r\n  button: {\r\n    borderRadius: 5,\r\n    fontFamily: 'Arial',\r\n    fontSize: 18,\r\n    padding: 4,\r\n    margin: theme.spacing(1),\r\n    alignContent: 'center',\r\n    textAlign: 'right'\r\n  },\r\n  formTitle: {\r\n    textAlign: 'center',\r\n    font: 30\r\n  },\r\n  formText: {\r\n    textAlign: 'right'\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    textAlign: 'right',\r\n    width: 150\r\n  },\r\n\r\n  icon: {\r\n    margin: theme.spacing(1)\r\n  },\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    marginTop: -12,\r\n    marginLeft: -12\r\n  },\r\n  menu: {\r\n    width: 150\r\n  },\r\n  rowRener: {\r\n    border: 1,\r\n    borderRadius: 3\r\n  }\r\n}));\r\n\r\nexport default ReportsTabScene;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { TableTabScene } from '../components';\r\nimport { makeStyles, Typography, Tab, Tabs, AppBar, Button, Toolbar } from '@material-ui/core/';\r\nimport green from '@material-ui/core/colors/green';\r\nimport { GenericTab } from '../components/GenericTab';\r\nimport {\r\n  getStudents,\r\n  getTutors,\r\n  getCoordinators,\r\n  getDepartmentManagers\r\n} from '../utils/createRowData';\r\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\r\nimport firebase from 'firebase';\r\nimport Loader from 'react-loader-spinner';\r\nimport { addOwners } from '../utils/local-db';\r\nimport { firestoreModule } from '../Firebase/Firebase';\r\nimport Upload from '../utils/Upload';\r\nimport ReportsTabScene from './ReportsTabScene';\r\nimport logo from '../assets/images/tamir_logoshakuf.png';\r\nimport backG from '../assets/images/S.jpg';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    padding: theme.spacing(2, 1),\r\n    textAlign: 'right',\r\n    backgroundColor: theme.palette.background.paper,\r\n    width: '100%'\r\n  },\r\n  table: {\r\n    padding: 20,\r\n    paddingTop: 5,\r\n    borderRadius: 3\r\n  },\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: 'absolute',\r\n    top: '15%',\r\n    left: '50%',\r\n    marginTop: -12,\r\n    marginLeft: -12\r\n  },\r\n  details: {\r\n    textAlign: 'right',\r\n    backgroundColor: theme.palette.background.paper,\r\n    padding: 5\r\n  },\r\n  appBar: {\r\n    alignItems: 'center',\r\n    backgroundColor: '#F9F9F9'\r\n  },\r\n  tabLabel: {\r\n    fontFamily: 'Alef',\r\n    fontWeight: 'bold',\r\n    fontSize: 22,\r\n    color: '#41ad48'\r\n  }\r\n}));\r\n\r\nconst uiConfig = {\r\n  signInFlow: 'popup',\r\n  signInOptions: [\r\n    {\r\n      provider: firebase.auth.PhoneAuthProvider.PROVIDER_ID,\r\n      defaultCountry: 'IL'\r\n    }\r\n  ],\r\n  callbacks: {\r\n    signInSuccessWithAuthResult: () => false\r\n  }\r\n};\r\n\r\nconst popup = () => {\r\n  return 'are you sure you want to exit?';\r\n};\r\n\r\nconst MainScene = () => {\r\n  const [userStatus, setUserStatus] = useState('SignedOut');\r\n  const [loading, setLoading] = useState(true);\r\n  const [loadingTutors, setLoadingTutors] = useState(true);\r\n  const [loadingCoordinators, setLoadingCoordinators] = useState(true);\r\n  const [loadingDepartmentManagers, setLoadingDepartmentManagers] = useState(true);\r\n  const [studentsRows, setStudentsRows] = useState([]);\r\n  const [saveButtonColor, setSaveButtonColor] = useState('default');\r\n  const [tutorsSaveButtonColor, setTutorsSaveButtonColor] = useState('default');\r\n  const [coordinatorsSaveButtonColor, setCoordinatorsSaveButtonColor] = useState('default');\r\n  const [departmentManagersSaveButtonColor, setDepartmentManagersSaveButtonColor] = useState(\r\n    'default'\r\n  );\r\n  const [coordinatorsRows, setCoordinatorsRows] = useState([]);\r\n  const [tutorsRows, setTutorsRows] = useState([]);\r\n  const [departmentManagersRows, setDepartmentManagersRows] = useState([]);\r\n  const [displayedTab, setDisplayedTab] = useState('TableTabScene');\r\n  const [originalRows, setOriginalRows] = useState([]);\r\n  const [tutorsOriginalRows, setTutorsOriginalRows] = useState([]);\r\n  const [coordinatorsOriginalRows, setCoordinatorsOriginalRows] = useState([]);\r\n  const [departmentManagersOriginalRows, setDepartmentManagersOriginalRows] = useState([]);\r\n\r\n  firebase.auth().languageCode = 'iw';\r\n  let unregisterAuthObserver;\r\n  // componentDidMount\r\n  useEffect(() => {\r\n    unregisterAuthObserver = firebase.auth().onAuthStateChanged(user => {\r\n      if (user) {\r\n        setUserStatus('SignedInCheckingPermissions');\r\n        user\r\n          .getIdTokenResult()\r\n          .then(idTokenResult => {\r\n            if (idTokenResult && idTokenResult.claims && idTokenResult.claims.isRegistered) {\r\n              setUserStatus(idTokenResult.claims);\r\n            } else {\r\n              firebase\r\n                .auth()\r\n                .signOut()\r\n                .then(() => {\r\n                  setUserStatus('SignedOutPermissionDenied');\r\n                });\r\n            }\r\n          })\r\n          .catch(err => {\r\n            firebase\r\n              .auth()\r\n              .signOut()\r\n              .then(() => setUserStatus('SignedOutPermissionDenied'));\r\n            console.error(err);\r\n          });\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  // componentWillUnmount\r\n  useEffect(() => {\r\n    return () => {\r\n      unregisterAuthObserver();\r\n    };\r\n  }, []);\r\n\r\n  if (userStatus.isRegistered && loading) {\r\n    const { uid } = firebase.auth().currentUser;\r\n    const { role } = userStatus;\r\n    getStudents(setStudentsRows, setLoading, uid, role);\r\n    getStudents(setOriginalRows, setLoading, uid, role);\r\n    if (role !== 'tutor') {\r\n      getTutors(setTutorsRows, uid, setLoadingTutors, role);\r\n      getTutors(setTutorsOriginalRows, uid, setLoadingTutors, role);\r\n    }\r\n    if (role === 'departmentManager' || role === 'ceo') {\r\n      getCoordinators(setCoordinatorsRows, uid, setLoadingCoordinators, role);\r\n      getCoordinators(setCoordinatorsOriginalRows, uid, setLoadingCoordinators, role);\r\n    }\r\n    if (role === 'ceo') {\r\n      getDepartmentManagers(setDepartmentManagersRows, setLoadingDepartmentManagers);\r\n      getDepartmentManagers(setDepartmentManagersOriginalRows, setLoadingDepartmentManagers);\r\n    }\r\n  }\r\n\r\n  function handleChange(event, newValue) {\r\n    setDisplayedTab(newValue);\r\n  }\r\n\r\n  const classes = useStyles();\r\n\r\n  function getAppropriateStudentsRows() {\r\n    const { uid } = firebase.auth().currentUser;\r\n    const { role } = userStatus;\r\n\r\n    if (role === 'tutor' && !loading) {\r\n      return (\r\n        <TableTabScene\r\n          originalRows={originalRows}\r\n          setOriginalRows={setOriginalRows}\r\n          rows={studentsRows}\r\n          setMainRows={setStudentsRows}\r\n          saveButtonColor={saveButtonColor}\r\n          setSaveButtonColor={setSaveButtonColor}\r\n          userStatus={userStatus}\r\n          role={role}\r\n          uid={uid}\r\n          tutors={tutorsRows}\r\n          coordinators={coordinatorsRows}\r\n          departmentManagers={departmentManagersRows}\r\n        />\r\n      );\r\n    } else if (role === 'coordinator' && !loading && !loadingTutors) {\r\n      return (\r\n        <TableTabScene\r\n          originalRows={originalRows}\r\n          setOriginalRows={setOriginalRows}\r\n          rows={studentsRows}\r\n          setMainRows={setStudentsRows}\r\n          saveButtonColor={saveButtonColor}\r\n          setSaveButtonColor={setSaveButtonColor}\r\n          userStatus={userStatus}\r\n          role={role}\r\n          uid={uid}\r\n          tutors={tutorsRows}\r\n          coordinators={coordinatorsRows}\r\n          departmentManagers={departmentManagersRows}\r\n        />\r\n      );\r\n    } else if (role === 'departmentManager' && !loading && !loadingTutors && !loadingCoordinators) {\r\n      return (\r\n        <TableTabScene\r\n          originalRows={originalRows}\r\n          setOriginalRows={setOriginalRows}\r\n          rows={studentsRows}\r\n          setMainRows={setStudentsRows}\r\n          saveButtonColor={saveButtonColor}\r\n          setSaveButtonColor={setSaveButtonColor}\r\n          userStatus={userStatus}\r\n          role={role}\r\n          uid={uid}\r\n          tutors={tutorsRows}\r\n          coordinators={coordinatorsRows}\r\n          departmentManagers={departmentManagersRows}\r\n        />\r\n      );\r\n    } else if (\r\n      role === 'ceo' &&\r\n      !loading &&\r\n      !loadingTutors &&\r\n      !loadingCoordinators &&\r\n      !loadingDepartmentManagers\r\n    ) {\r\n      return (\r\n        <TableTabScene\r\n          originalRows={originalRows}\r\n          setOriginalRows={setOriginalRows}\r\n          rows={studentsRows}\r\n          setMainRows={setStudentsRows}\r\n          saveButtonColor={saveButtonColor}\r\n          setSaveButtonColor={setSaveButtonColor}\r\n          userStatus={userStatus}\r\n          role={role}\r\n          uid={uid}\r\n          tutors={tutorsRows}\r\n          coordinators={coordinatorsRows}\r\n          departmentManagers={departmentManagersRows}\r\n        />\r\n      );\r\n    } else return null;\r\n  }\r\n\r\n  if (userStatus === 'SignedOut')\r\n    return (\r\n      <div\r\n        style={{\r\n          backgroundColor: '#F9F9F9',\r\n          height: '100vh',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          // backgroundImage: `url(${backG})`,\r\n          // backgroundSize: 'cover',\r\n          // backgroundRepeat: 'no-repeat',\r\n          // backgroundPosition: 'center'\r\n        }}>\r\n        <AppBar>\r\n          <Toolbar style={{ textAlign: 'center' }}>\r\n            <Typography variant=\"h3\" style={{ flexGrow: 1, alignContent: 'center', alignItems: 'center' }} >\r\n              <h3 color=\"inherit\"  >דף התחברות</h3>\r\n            </Typography>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <img\r\n          src={logo}\r\n          style={{\r\n            width: 245,\r\n            height: 128,\r\n            alignSelf: 'flex-end',\r\n            marginRight: 50,\r\n            marginTop: 100\r\n          }}\r\n        />\r\n        <div>\r\n          <StyledFirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()} />\r\n        </div>\r\n      </div>\r\n    );\r\n  else if (userStatus === 'SignedOutPermissionDenied')\r\n    return (\r\n      <div\r\n        style={{\r\n          backgroundColor: '#F9F9F9',\r\n          height: '100vh',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          // backgroundImage: `url(${backG})`,\r\n          // backgroundSize: 'cover',\r\n          //     backgroundRepeat  : 'no-repeat',\r\n          //  backgroundPosition: 'center'\r\n        }}>\r\n        <AppBar>\r\n          <Toolbar style={{ textAlign: 'center' }}>\r\n            <Typography variant=\"h3\" style={{ flexGrow: 1, alignContent: 'center', alignItems: 'center' }} >\r\n              <h3 color=\"inherit\"  >דף התחברות</h3>\r\n            </Typography>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <img\r\n          src={logo}\r\n          style={{\r\n            width: 245,\r\n            height: 128,\r\n            alignSelf: 'flex-end',\r\n            marginRight: 50,\r\n            marginTop: 100\r\n          }}\r\n        />\r\n        <div>\r\n          <Typography variant=\"h5\" component=\"h5\" style={{ textAlign: 'right', color: 'red' }}>\r\n            !אין הרשאות גישה למספר זה\r\n          </Typography>\r\n          <StyledFirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()} />\r\n        </div>\r\n      </div>\r\n    );\r\n  else if (userStatus === 'SignedInCheckingPermissions')\r\n    return (\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          height: '100vh',\r\n          alignItems: 'center',\r\n          justifyContent: 'center'\r\n        }}>\r\n        <Loader type=\"Grid\" color=\"#41ad48\" height=\"100\" width=\"100\" />\r\n      </div>\r\n    );\r\n  else {\r\n    const { uid } = firebase.auth().currentUser;\r\n    const { role } = userStatus;\r\n    return (\r\n      <div>\r\n        {saveButtonColor === 'secondary' ? (window.onbeforeunload = popup) : null}\r\n        <div>\r\n          <AppBar\r\n            position=\"static\"\r\n            color=\"default\"\r\n            className={classes.appBar}\r\n            style={{\r\n              flex: 1,\r\n              flexDirection: 'row',\r\n              justifyContent: 'center',\r\n              paddingLeft: 10,\r\n              paddingTop: 7\r\n            }}>\r\n            <Button\r\n              style={{\r\n                marginRight: 'auto',\r\n                fontSize: 18,\r\n                fontWeight: 'bold',\r\n                alignContent: 'center',\r\n                textAlign: 'right',\r\n                color: '#41ad48'\r\n              }}\r\n              size=\"large\"\r\n\r\n              onClick={() => {\r\n                firebase.auth().signOut().then(() => {\r\n                  setUserStatus('SignedOut');\r\n                });\r\n\r\n              }}>\r\n              התנתק\r\n            </Button>\r\n            <Tabs\r\n              TabIndicatorProps={{\r\n                style: {\r\n                  backgroundColor: '#41ad48'\r\n                }\r\n              }}\r\n              style={{ marginRight: 'auto' }}\r\n              textColor=\"primary\"\r\n              variant=\"scrollable\"\r\n              scrollButtons=\"auto\"\r\n              value={displayedTab}\r\n              onChange={handleChange}>\r\n              <Tab\r\n                key={0}\r\n                value=\"ReportsTabScene\"\r\n                label={<span className={classes.tabLabel}>דו״חות</span>}\r\n              />\r\n              <Tab\r\n                key={5}\r\n                value=\"ImportFile\"\r\n                label={<span className={classes.tabLabel}>ייבוא מאקסל</span>}\r\n              />\r\n              {role === 'ceo' ? (\r\n                <Tab\r\n                  key={1}\r\n                  value=\"DepartmentManagersTabScene\"\r\n                  label={<span className={classes.tabLabel}>מנהלי מחלקות</span>}\r\n                />\r\n              ) : null}\r\n              {role === 'departmentManager' || role === 'ceo' ? (\r\n                <Tab\r\n                  key={2}\r\n                  value=\"CoordinatorsTabScene\"\r\n                  label={<span className={classes.tabLabel}>רכזים</span>}\r\n                />\r\n              ) : null}\r\n              {role !== 'tutor' ? (\r\n                <Tab\r\n                  key={3}\r\n                  value=\"TutorsTabScene\"\r\n                  label={<span className={classes.tabLabel}>מדריכים</span>}\r\n                />\r\n              ) : null}\r\n              <Tab\r\n                key={4}\r\n                value=\"TableTabScene\"\r\n                label={<span className={classes.tabLabel}>חניכים</span>}\r\n              />\r\n            </Tabs>\r\n\r\n            <img\r\n              src={logo}\r\n              style={{\r\n                width: 124,\r\n                height: 67,\r\n                //alignSelf: 'flex-end',\r\n                marginRight: 70,\r\n                // marginTop: 5\r\n              }}\r\n            />\r\n          </AppBar>\r\n\r\n          {displayedTab === 'TableTabScene' ? (\r\n            <div className={classes.table}>{getAppropriateStudentsRows()}</div>\r\n          ) : null}\r\n\r\n          {displayedTab === 'TutorsTabScene' ? (\r\n            <div className={classes.table}>\r\n              <GenericTab\r\n                originalRows={tutorsOriginalRows}\r\n                setOriginalRows={setTutorsOriginalRows}\r\n                rows={tutorsRows}\r\n                setMainRows={setTutorsRows}\r\n                genericSaveButtonColor={tutorsSaveButtonColor}\r\n                setGenericSaveButtonColor={setTutorsSaveButtonColor}\r\n                type=\"tutors\"\r\n                userStatus={userStatus}\r\n                role={role}\r\n                uid={uid}\r\n              />\r\n            </div>\r\n          ) : null}\r\n\r\n          {displayedTab === 'CoordinatorsTabScene' ? (\r\n            <div className={classes.table}>\r\n              <GenericTab\r\n                originalRows={coordinatorsOriginalRows}\r\n                setOriginalRows={setCoordinatorsOriginalRows}\r\n                rows={coordinatorsRows}\r\n                setMainRows={setCoordinatorsRows}\r\n                genericSaveButtonColor={coordinatorsSaveButtonColor}\r\n                setGenericSaveButtonColor={setCoordinatorsSaveButtonColor}\r\n                type=\"coordinators\"\r\n                userStatus={userStatus}\r\n                role={role}\r\n                uid={uid}\r\n              />\r\n            </div>\r\n          ) : null}\r\n\r\n          {displayedTab === 'DepartmentManagersTabScene' ? (\r\n            <div className={classes.table}>\r\n              <GenericTab\r\n                originalRows={departmentManagersOriginalRows}\r\n                setOriginalRows={setDepartmentManagersOriginalRows}\r\n                rows={departmentManagersRows}\r\n                setMainRows={setDepartmentManagersRows}\r\n                genericSaveButtonColor={departmentManagersSaveButtonColor}\r\n                setGenericSaveButtonColor={setDepartmentManagersSaveButtonColor}\r\n                type=\"departmentManagers\"\r\n                userStatus={userStatus}\r\n                role={role}\r\n                uid={uid}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          {displayedTab === 'ImportFile' ? (\r\n            <div className={classes.table}>\r\n              <Upload\r\n                onNewFile={aooToAdd => {\r\n                  aooToAdd.forEach(student => {\r\n                    const fixedStudent = addOwners(role, uid, userStatus.owners, null, student);\r\n                    firestoreModule\r\n                      .getStudents()\r\n                      .add({ ...fixedStudent, lastModified: new Date() });\r\n                  });\r\n                }}\r\n              />\r\n            </div>\r\n          ) : null}\r\n\r\n          {displayedTab === 'ReportsTabScene' ? (\r\n            <div className={classes.table}>\r\n              {role !== 'tutor' ? <ReportsTabScene tutors={tutorsOriginalRows} />\r\n                : <ReportsTabScene tutor={{\r\n                  fid: firebase.auth().currentUser.uid\r\n                }} />\r\n              }\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default MainScene;\r\n","import * as React from 'react';\nimport { Component } from 'react';\nimport MainScene from './Scenes/MainScene';\nimport './App.css';\n\nclass App extends Component {\n  render() {\n    return <MainScene />;\n  }\n}\n\nexport default App;\n","/* eslint-disable no-console */\n/* eslint-disable no-undef */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconst root = document.getElementById('root');\nif (root) {\n  ReactDOM.render(<App />, root);\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/tamir_logoshakuf.1dceb69b.png\";"],"sourceRoot":""}